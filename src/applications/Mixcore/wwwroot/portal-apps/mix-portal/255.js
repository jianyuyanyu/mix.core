"use strict";(self.webpackChunkmix_portal=self.webpackChunkmix_portal||[]).push([[255],{7255:(P,m,e)=>{e.r(m),e.d(m,{MixDetailTemplateComponent:()=>D});var r=e(9808),o=e(3075),_=e(9577),l=e(573),p=e(9855),d=e(9367),c=e(1115),h=e(7737),u=e(946),E=e(6679),C=e(8704),M=e(2722),t=e(5e3),v=e(6696);function f(n,s){if(1&n&&t.\u0275\u0275element(0,"mix-template-editor",4),2&n){const a=t.\u0275\u0275nextContext();t.\u0275\u0275property("disabled",!0)("templateId",a.currentTemplate.id)}}function O(n,s){1&n&&t.\u0275\u0275element(0,"mix-skeleton-loading")}let D=(()=>{class n extends l.H6{constructor(a,i,g){super(),this.templateApi=a,this.activatedRoute=i,this.destroy$=g,this.activeTabIndex=0,this.autoSave=new o.FormControl(!0),this.form=new o.FormGroup({templateTitle:new o.FormControl("",o.Validators.required),templateCode:new o.FormControl(""),javascriptCode:new o.FormControl(""),styleSheetCode:new o.FormControl("")})}ngOnInit(){this.activatedRoute.params.pipe((0,M.R)(this.destroy$)).subscribe(a=>{!a.templateId||(this.loading$.next(!0),this.templateApi.getById(a.templateId).subscribe(i=>{this.currentTemplate=i,this.form.controls.templateCode.patchValue(i.content),this.form.controls.styleSheetCode.patchValue(i.styles),this.form.controls.javascriptCode.patchValue(i.scripts),this.form.controls.templateTitle.patchValue(i.fileName),this.loading$.next(!1)}))})}onSave(){if(!l.hf.validateForm(this.form))return;const a=Object.assign(Object.assign({},this.currentTemplate),{content:this.form.controls.templateCode.value,styles:this.form.controls.styleSheetCode.value,scripts:this.form.controls.javascriptCode.value,fileName:this.form.value.templateTitle});this.templateApi.save(a).subscribe({next:()=>{this.showSuccess("Successfully save")},error:()=>{this.showError("Error when save template, please try again")}})}}return n.\u0275fac=function(a){return new(a||n)(t.\u0275\u0275directiveInject(l.k3),t.\u0275\u0275directiveInject(v.gz),t.\u0275\u0275directiveInject(l.z2))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["mix-detail-template"]],standalone:!0,features:[t.\u0275\u0275ProvidersFeature([l.z2]),t.\u0275\u0275InheritDefinitionFeature,t.\u0275\u0275StandaloneFeature],decls:6,vars:6,consts:[[1,"mix-workspace-container","detail-template"],[1,"mix-workspace-container__container"],[3,"disabled","templateId",4,"ngIf"],[4,"ngIf"],[3,"disabled","templateId"]],template:function(a,i){1&a&&(t.\u0275\u0275elementStart(0,"div",0)(1,"div",1),t.\u0275\u0275template(2,f,1,2,"mix-template-editor",2),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275template(4,O,1,0,"mix-skeleton-loading",3),t.\u0275\u0275pipe(5,"async"),t.\u0275\u0275elementEnd()()),2&a&&(t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",i.currentTemplate&&!t.\u0275\u0275pipeBind1(3,2,i.loading$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!!t.\u0275\u0275pipeBind1(5,4,i.loading$)))},dependencies:[r.ez,r.O5,r.Ov,o.FormsModule,C.nm,o.ReactiveFormsModule,d.fN,h.YM,u.$$,E.Qf,c.cn,p.Q,l.qt,_.r],styles:[".detail-template[_ngcontent-%COMP%]{height:100%}.detail-template__title[_ngcontent-%COMP%]{margin-right:auto}.detail-template[_ngcontent-%COMP%]   mix-template-editor[_ngcontent-%COMP%]{width:100%}"]}),n})()}}]);