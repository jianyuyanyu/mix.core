"use strict";var Vr=Object.defineProperty,Kr=Object.defineProperties,Wr=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,ae=(S,x,_)=>x in S?Vr(S,x,{enumerable:!0,configurable:!0,writable:!0,value:_}):S[x]=_,f=(S,x)=>{for(var _ in x||(x={}))ce.call(x,_)&&ae(S,_,x[_]);if(ft)for(var _ of ft(x))le.call(x,_)&&ae(S,_,x[_]);return S},I=(S,x)=>Kr(S,Wr(x)),ue=(S,x)=>{var _={};for(var b in S)ce.call(S,b)&&x.indexOf(b)<0&&(_[b]=S[b]);if(null!=S&&ft)for(var b of ft(S))x.indexOf(b)<0&&le.call(S,b)&&(_[b]=S[b]);return _};(self.webpackChunkmix_portal=self.webpackChunkmix_portal||[]).push([[881],{1881:(S,x,_)=>{_.r(x),_.d(x,{default:()=>Dr});var b=_(647),B=_(9163),O=_(491),H=_(8383),ht=_(4027),It=_(805),de=_(8914);function mt(e){return"Object"===function pe(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Z(e,t){const n=f({},e);return mt(e)&&mt(t)&&Object.keys(t).forEach(r=>{mt(t[r])?r in e?n[r]=Z(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}function k(e,t,...n){return function Pt(e){return"function"==typeof e}(e)?t?e.bind(t)(...n):e(...n):e}function y(e,t,n){return void 0===e.config[t]&&e.parent?y(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind(I(f({},n),{parent:e.parent?y(e.parent,t,n):null})):e.config[t]}class L{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=f(f({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=k(y(this,"addOptions",{name:this.name}))),this.storage=k(y(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new L(t)}configure(t={}){const n=this.extend();return n.options=Z(this.options,t),n.storage=k(y(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new L(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=k(y(n,"addOptions",{name:n.name})),n.storage=k(y(n,"addStorage",{name:n.name,options:n.options})),n}}function gt(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}L.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new b.Sy({key:new b.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:s}=t,{ranges:o}=s;return function Bt(e,t,n){const{from:r,to:s}=t,{blockSeparator:o="\n\n",textSerializers:i={}}=n||{};let a="",c=!0;return e.nodesBetween(r,s,(l,u,d,p)=>{var h;const g=null==i?void 0:i[l.type.name];g?(l.isBlock&&!c&&(a+=o,c=!0),a+=g({node:l,pos:u,parent:d,index:p,range:t})):l.isText?(a+=null===(h=null==l?void 0:l.text)||void 0===h?void 0:h.slice(Math.max(r,u)-u,s-u),c=!1):l.isBlock&&!c&&(a+=o,c=!0)}),a}(r,{from:Math.min(...o.map(u=>u.$from.pos)),to:Math.max(...o.map(u=>u.$to.pos))},{textSerializers:gt(n)})}}})]}});var he=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null==window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())}),!0)}),me=Object.freeze({__proto__:null,clearContent:(e=!1)=>({commands:t})=>t.setContent("",e)}),ge=Object.freeze({__proto__:null,clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:i})=>{e.doc.nodesBetween(o.pos,i.pos,(a,c)=>{if(a.type.isText)return;const{doc:l,mapping:u}=t,d=l.resolve(u.map(c)),p=l.resolve(u.map(c+a.nodeSize)),h=d.blockRange(p);if(!h)return;const g=(0,B.k9)(h);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(h.start,m)}(g||0===g)&&t.lift(h,g)})}),!0}}),ve=Object.freeze({__proto__:null,command:e=>t=>e(t)}),ye=Object.freeze({__proto__:null,createParagraphNear:()=>({state:e,dispatch:t})=>(0,O.mD)(e,t)});function T(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var be=Object.freeze({__proto__:null,deleteNode:e=>({tr:t,state:n,dispatch:r})=>{const s=T(e,n.schema),o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const c=o.before(i),l=o.after(i);t.delete(c,l).scrollIntoView()}return!0}return!1}}),Me=Object.freeze({__proto__:null,deleteRange:e=>({tr:t,dispatch:n})=>{const{from:r,to:s}=e;return n&&t.delete(r,s),!0}}),ke=Object.freeze({__proto__:null,deleteSelection:()=>({state:e,dispatch:t})=>(0,O.NE)(e,t)}),we=Object.freeze({__proto__:null,enter:()=>({commands:e})=>e.keyboardShortcut("Enter")}),_e=Object.freeze({__proto__:null,exitCode:()=>({state:e,dispatch:t})=>(0,O.uo)(e,t)});function D(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function tt(e,t,n={strict:!0}){const r=Object.keys(t);return!r.length||r.every(s=>n.strict?t[s]===e[s]:function vt(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(t[s])?t[s].test(e[s]):t[s]===e[s])}function yt(e,t,n={}){return e.find(r=>r.type===t&&tt(r.attrs,n))}function Se(e,t,n={}){return!!yt(e,t,n)}function bt(e,t,n={}){if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(e.parentOffset===r.offset&&0!==r.offset&&(r=e.parent.childBefore(e.parentOffset)),!r.node)return;const s=yt(r.node.marks,t,n);if(!s)return;let o=r.index,i=e.start()+r.offset,a=o+1,c=i+r.node.nodeSize;for(yt(r.node.marks,t,n);o>0&&s.isInSet(e.parent.child(o-1).marks);)o-=1,i-=e.parent.child(o).nodeSize;for(;a<e.parent.childCount&&Se(e.parent.child(a).marks,t,n);)c+=e.parent.child(a).nodeSize,a+=1;return{from:i,to:c}}var xe=Object.freeze({__proto__:null,extendMarkRange:(e,t={})=>({tr:n,state:r,dispatch:s})=>{const o=D(e,r.schema),{doc:i,selection:a}=n,{$from:c,from:l,to:u}=a;if(s){const d=bt(c,o,t);if(d&&d.from<=l&&d.to>=u){const p=b.Bs.create(i,d.from,d.to);n.setSelection(p)}}return!0}}),Te=Object.freeze({__proto__:null,first:e=>t=>{const n="function"==typeof e?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1}});function et(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function z(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}var Oe=Object.freeze({__proto__:null,focus:(e=null,t)=>({editor:n,view:r,tr:s,dispatch:o})=>{t=f({scrollIntoView:!0},t);const i=()=>{et()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),null!=t&&t.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&null===e||!1===e)return!0;if(o&&null===e&&!function Ae(e){return function Lt(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!function Ee(e){var t;return"class"===(null===(t=e.constructor)||void 0===t?void 0:t.toString().substring(0,5))}(e)}(e)&&e instanceof b.Bs}(n.state.selection))return i(),!0;const a=function Nt(e,t=null){if(!t)return null;const n=b.Y1.atStart(e),r=b.Y1.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;const s=n.from,o=r.to;return"all"===t?b.Bs.create(e,z(0,s,o),z(e.content.size,s,o)):b.Bs.create(e,z(t,s,o),z(t,s,o))}(n.state.doc,e)||n.state.selection,c=n.state.selection.eq(a);return o&&(c||s.setSelection(a),c&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0}}),Ce=Object.freeze({__proto__:null,forEach:(e,t)=>n=>e.every((r,s)=>t(r,I(f({},n),{index:s})))}),Ie=Object.freeze({__proto__:null,insertContent:(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t)});function Mt(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function nt(e,t,n){if(n=f({slice:!0,parseOptions:{}},n),"object"==typeof e&&null!==e)try{return Array.isArray(e)?H.HY.fromArray(e.map(r=>t.nodeFromJSON(r))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),nt("",t,n)}if("string"==typeof e){const r=H.aw.fromSchema(t);return n.slice?r.parseSlice(Mt(e),n.parseOptions).content:r.parse(Mt(e),n.parseOptions)}return nt("",t,n)}var Le=Object.freeze({__proto__:null,insertContentAt:(e,t,n)=>({tr:r,dispatch:s,editor:o})=>{if(s){n=f({parseOptions:{},updateSelection:!0},n);const i=nt(t,o.schema,{parseOptions:f({preserveWhitespace:"full"},n.parseOptions)});if("<>"===i.toString())return!0;let{from:a,to:c}="number"==typeof e?{from:e,to:e}:e,l=!0,u=!0;if(((e=>e.toString().startsWith("<"))(i)?i:[i]).forEach(p=>{p.check(),l=!!l&&p.isText&&0===p.marks.length,u=!!u&&p.isBlock}),a===c&&u){const{parent:p}=r.doc.resolve(a);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(a-=1,c+=1)}l?r.insertText(t,a,c):r.replaceWith(a,c,i),n.updateSelection&&function Pe(e,t,n){const r=e.steps.length-1;if(r<t)return;const s=e.steps[r];if(!(s instanceof B.Pu||s instanceof B.FC))return;let i=0;e.mapping.maps[r].forEach((a,c,l,u)=>{0===i&&(i=u)}),e.setSelection(b.Y1.near(e.doc.resolve(i),n))}(r,r.steps.length-1,-1)}return!0}}),Ne=Object.freeze({__proto__:null,joinBackward:()=>({state:e,dispatch:t})=>(0,O.al)(e,t)}),He=Object.freeze({__proto__:null,joinForward:()=>({state:e,dispatch:t})=>(0,O.Y_)(e,t)});function Ht(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var je=Object.freeze({__proto__:null,keyboardShortcut:e=>({editor:t,view:n,tr:r,dispatch:s})=>{const o=function $e(e){const t=e.split(/-(?!$)/);let r,s,o,i,n=t[t.length-1];"Space"===n&&(n=" ");for(let a=0;a<t.length-1;a+=1){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else{if(!/^mod$/i.test(c))throw new Error(`Unrecognized modifier name: ${c}`);et()||Ht()?i=!0:s=!0}}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}(e).split(/-(?!$)/),i=o.find(l=>!["Alt","Ctrl","Meta","Shift"].includes(l)),a=new KeyboardEvent("keydown",{key:"Space"===i?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),c=t.captureTransaction(()=>{n.someProp("handleKeyDown",l=>l(n,a))});return null==c||c.steps.forEach(l=>{const u=l.map(r.mapping);u&&s&&r.maybeStep(u)}),!0}});function q(e,t,n={}){const{from:r,to:s,empty:o}=e.selection,i=t?T(t,e.schema):null,a=[];e.doc.nodesBetween(r,s,(d,p)=>{if(d.isText)return;const h=Math.max(r,p),g=Math.min(s,p+d.nodeSize);a.push({node:d,from:h,to:g})});const c=s-r,l=a.filter(d=>!i||i.name===d.node.type.name).filter(d=>tt(d.node.attrs,n,{strict:!1}));return o?!!l.length:l.reduce((d,p)=>d+p.to-p.from,0)>=c}var Re=Object.freeze({__proto__:null,lift:(e,t={})=>({state:n,dispatch:r})=>!!q(n,T(e,n.schema),t)&&(0,O.xb)(n,r)}),ze=Object.freeze({__proto__:null,liftEmptyBlock:()=>({state:e,dispatch:t})=>(0,O.X0)(e,t)}),De=Object.freeze({__proto__:null,liftListItem:e=>({state:t,dispatch:n})=>{const r=T(e,t.schema);return(0,ht.IB)(r)(t,n)}}),Fe=Object.freeze({__proto__:null,newlineInCode:()=>({state:e,dispatch:t})=>(0,O.QK)(e,t)});function rt(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function $t(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce((r,s)=>(n.includes(s)||(r[s]=e[s]),r),{})}var Ve=Object.freeze({__proto__:null,resetAttributes:(e,t)=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=rt("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(o=T(e,r.schema)),"mark"===a&&(i=D(e,r.schema)),s&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(l,u)=>{o&&o===l.type&&n.setNodeMarkup(u,void 0,$t(l.attrs,t)),i&&l.marks.length&&l.marks.forEach(d=>{i===d.type&&n.addMark(u,u+l.nodeSize,i.create($t(d.attrs,t)))})})}),!0)}}),Ke=Object.freeze({__proto__:null,scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0)}),We=Object.freeze({__proto__:null,selectAll:()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size})}),Ge=Object.freeze({__proto__:null,selectNodeBackward:()=>({state:e,dispatch:t})=>(0,O._M)(e,t)}),Je=Object.freeze({__proto__:null,selectNodeForward:()=>({state:e,dispatch:t})=>(0,O.o)(e,t)}),Ye=Object.freeze({__proto__:null,selectParentNode:()=>({state:e,dispatch:t})=>(0,O.N0)(e,t)}),Ue=Object.freeze({__proto__:null,selectTextblockEnd:()=>({state:e,dispatch:t})=>(0,O.nw)(e,t)}),qe=Object.freeze({__proto__:null,selectTextblockStart:()=>({state:e,dispatch:t})=>(0,O.U9)(e,t)});var Xe=Object.freeze({__proto__:null,setContent:(e,t=!1,n={})=>({tr:r,editor:s,dispatch:o})=>{const{doc:i}=r,a=function jt(e,t,n={}){return nt(e,t,{slice:!1,parseOptions:n})}(e,s.schema,n),c=b.Bs.create(i,0,i.content.size);return o&&r.setSelection(c).replaceSelectionWith(a,!1).setMeta("preventUpdate",!t),!0}});var Qe=Object.freeze({__proto__:null,setMark:(e,t={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:i,ranges:a}=o,c=D(e,r.schema);if(s)if(i){const l=function Rt(e,t){const n=D(t,e.schema),{from:r,to:s,empty:o}=e.selection,i=[];o?(e.storedMarks&&i.push(...e.storedMarks),i.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,s,c=>{i.push(...c.marks)});const a=i.find(c=>c.type.name===n.name);return a?f({},a.attrs):{}}(r,c);n.addStoredMark(c.create(f(f({},l),t)))}else a.forEach(l=>{const u=l.$from.pos,d=l.$to.pos;r.doc.nodesBetween(u,d,(p,h)=>{const g=Math.max(h,u),m=Math.min(h+p.nodeSize,d);p.marks.find(M=>M.type===c)?p.marks.forEach(M=>{c===M.type&&n.addMark(g,m,c.create(f(f({},M.attrs),t)))}):n.addMark(g,m,c.create(t))})});return!0}}),Ze=Object.freeze({__proto__:null,setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0)}),tn=Object.freeze({__proto__:null,setNode:(e,t={})=>({state:n,dispatch:r,chain:s})=>{const o=T(e,n.schema);return o.isTextblock?s().command(({commands:i})=>!!(0,O.uJ)(o,t)(n)||i.clearNodes()).command(({state:i})=>(0,O.uJ)(o,t)(i,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}}),en=Object.freeze({__proto__:null,setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,s=b.Y1.atStart(r).from,o=b.Y1.atEnd(r).to,i=z(e,s,o),a=b.qv.create(r,i);t.setSelection(a)}return!0}}),nn=Object.freeze({__proto__:null,setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:s,to:o}="number"==typeof e?{from:e,to:e}:e,i=b.Bs.atStart(r).from,a=b.Bs.atEnd(r).to,c=z(s,i,a),l=z(o,i,a),u=b.Bs.create(r,c,l);t.setSelection(u)}return!0}}),rn=Object.freeze({__proto__:null,sinkListItem:e=>({state:t,dispatch:n})=>{const r=T(e,t.schema);return(0,ht.bw)(r)(t,n)}});function st(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=e.find(o=>o.type===t&&o.name===r);return!!s&&s.attribute.keepOnSplit}))}function zt(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(s=>null==t?void 0:t.includes(s.type.name));e.tr.ensureMarks(r)}}var on=Object.freeze({__proto__:null,splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:i}=t,{$from:a,$to:c}=o,u=st(s.extensionManager.attributes,a.node().type.name,a.node().attrs);if(o instanceof b.qv&&o.node.isBlock)return!(!a.parentOffset||!(0,B.Ax)(i,a.pos)||(r&&(e&&zt(n,s.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),0));if(!a.parent.isBlock)return!1;if(r){const d=c.parentOffset===c.parent.content.size;o instanceof b.Bs&&t.deleteSelection();const p=0===a.depth?void 0:function sn(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1)));let h=d&&p?[{type:p,attrs:u}]:void 0,g=(0,B.Ax)(t.doc,t.mapping.map(a.pos),1,h);if(!h&&!g&&(0,B.Ax)(t.doc,t.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(g=!0,h=p?[{type:p,attrs:u}]:void 0),g&&(t.split(t.mapping.map(a.pos),1,h),p&&!d&&!a.parentOffset&&a.parent.type!==p)){const m=t.mapping.map(a.before()),v=t.doc.resolve(m);a.node(-1).canReplaceWith(v.index(),v.index()+1,p)&&t.setNodeMarkup(t.mapping.map(a.before()),p)}e&&zt(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return!0}}),an=Object.freeze({__proto__:null,splitListItem:e=>({tr:t,state:n,dispatch:r,editor:s})=>{var o;const i=T(e,n.schema),{$from:a,$to:c}=n.selection,l=n.selection.node;if(l&&l.isBlock||a.depth<2||!a.sameParent(c))return!1;const u=a.node(-1);if(u.type!==i)return!1;const d=s.extensionManager.attributes;if(0===a.parent.content.size&&a.node(-1).childCount===a.indexAfter(-1)){if(2===a.depth||a.node(-3).type!==i||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let v=H.HY.empty;const M=a.index(-1)?1:a.index(-2)?2:3;for(let U=a.depth-M;U>=a.depth-3;U-=1)v=H.HY.from(a.node(U).copy(v));const w=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,V=st(d,a.node().type.name,a.node().attrs),G=(null===(o=i.contentMatch.defaultType)||void 0===o?void 0:o.createAndFill(V))||void 0;v=v.append(H.HY.from(i.createAndFill(null,G)||void 0));const Q=a.before(a.depth-(M-1));t.replace(Q,a.after(-w),new H.p2(v,4-M,0));let pt=-1;t.doc.nodesBetween(Q,t.doc.content.size,(U,Fr)=>{if(pt>-1)return!1;U.isTextblock&&0===U.content.size&&(pt=Fr+1)}),pt>-1&&t.setSelection(b.Bs.near(t.doc.resolve(pt))),t.scrollIntoView()}return!0}const p=c.pos===a.end()?u.contentMatchAt(0).defaultType:null,h=st(d,u.type.name,u.attrs),g=st(d,a.node().type.name,a.node().attrs);t.delete(a.pos,c.pos);const m=p?[{type:i,attrs:h},{type:p,attrs:g}]:[{type:i,attrs:h}];return!!(0,B.Ax)(t.doc,a.pos,2)&&(r&&t.split(a.pos,2,m).scrollIntoView(),!0)}});function kt(e){return t=>function cn(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}function Dt(e,t){const{nodeExtensions:n}=function ot(e){return{baseExtensions:e.filter(s=>"extension"===s.type),nodeExtensions:e.filter(s=>"node"===s.type),markExtensions:e.filter(s=>"mark"===s.type)}}(t),r=n.find(i=>i.name===e);if(!r)return!1;const o=k(y(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"==typeof o&&o.split(" ").includes("list")}const Ft=(e,t)=>{const n=kt(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const s=e.doc.nodeAt(r);return n.node.type===(null==s?void 0:s.type)&&(0,B.Mn)(e.doc,n.pos)&&e.join(n.pos),!0},Vt=(e,t)=>{const n=kt(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const s=e.doc.nodeAt(r);return n.node.type===(null==s?void 0:s.type)&&(0,B.Mn)(e.doc,r)&&e.join(r),!0};var ln=Object.freeze({__proto__:null,toggleList:(e,t)=>({editor:n,tr:r,state:s,dispatch:o,chain:i,commands:a,can:c})=>{const{extensions:l}=n.extensionManager,u=T(e,s.schema),d=T(t,s.schema),{selection:p}=s,{$from:h,$to:g}=p,m=h.blockRange(g);if(!m)return!1;const v=kt(M=>Dt(M.type.name,l))(p);if(m.depth>=1&&v&&m.depth-v.depth<=1){if(v.node.type===u)return a.liftListItem(d);if(Dt(v.node.type.name,l)&&u.validContent(v.node.content)&&o)return i().command(()=>(r.setNodeMarkup(v.pos,u),!0)).command(()=>Ft(r,u)).command(()=>Vt(r,u)).run()}return i().command(()=>!!c().wrapInList(u)||a.clearNodes()).wrapInList(u).command(()=>Ft(r,u)).command(()=>Vt(r,u)).run()}});var un=Object.freeze({__proto__:null,toggleMark:(e,t={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,i=D(e,r.schema);return function wt(e,t,n={}){const{empty:r,ranges:s}=e.selection,o=t?D(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(d=>!o||o.name===d.type.name).find(d=>tt(d.attrs,n,{strict:!1}));let i=0;const a=[];if(s.forEach(({$from:d,$to:p})=>{const h=d.pos,g=p.pos;e.doc.nodesBetween(h,g,(m,v)=>{if(!m.isText&&!m.marks.length)return;const M=Math.max(h,v),w=Math.min(g,v+m.nodeSize);i+=w-M,a.push(...m.marks.map(G=>({mark:G,from:M,to:w})))})}),0===i)return!1;const c=a.filter(d=>!o||o.name===d.mark.type.name).filter(d=>tt(d.mark.attrs,n,{strict:!1})).reduce((d,p)=>d+p.to-p.from,0),l=a.filter(d=>!o||d.mark.type!==o&&d.mark.type.excludes(o)).reduce((d,p)=>d+p.to-p.from,0);return(c>0?c+l:c)>=i}(r,i,t)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,t)}}),dn=Object.freeze({__proto__:null,toggleNode:(e,t,n={})=>({state:r,commands:s})=>{const o=T(e,r.schema),i=T(t,r.schema);return q(r,o,n)?s.setNode(i):s.setNode(o,n)}}),pn=Object.freeze({__proto__:null,toggleWrap:(e,t={})=>({state:n,commands:r})=>{const s=T(e,n.schema);return q(n,s,t)?r.lift(s):r.wrapIn(s,t)}}),fn=Object.freeze({__proto__:null,undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(e))){if(t){const i=e.tr,a=o.transform;for(let c=a.steps.length-1;c>=0;c-=1)i.step(a.steps[c].invert(a.docs[c]));if(o.text){const c=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,e.schema.text(o.text,c))}else i.delete(o.from,o.to)}return!0}}return!1}}),hn=Object.freeze({__proto__:null,unsetAllMarks:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:s}=n;return r||t&&s.forEach(o=>{e.removeMark(o.$from.pos,o.$to.pos)}),!0}}),mn=Object.freeze({__proto__:null,unsetMark:(e,t={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=t,{selection:a}=n,c=D(e,r.schema),{$from:l,empty:u,ranges:d}=a;if(!s)return!0;if(u&&i){let{from:p,to:h}=a;const g=null===(o=l.marks().find(v=>v.type===c))||void 0===o?void 0:o.attrs,m=bt(l,c,g);m&&(p=m.from,h=m.to),n.removeMark(p,h,c)}else d.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,c)});return n.removeStoredMark(c),!0}}),gn=Object.freeze({__proto__:null,updateAttributes:(e,t={})=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=rt("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(o=T(e,r.schema)),"mark"===a&&(i=D(e,r.schema)),s&&n.selection.ranges.forEach(c=>{const l=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(l,u,(d,p)=>{o&&o===d.type&&n.setNodeMarkup(p,void 0,f(f({},d.attrs),t)),i&&d.marks.length&&d.marks.forEach(h=>{if(i===h.type){const g=Math.max(p,l),m=Math.min(p+d.nodeSize,u);n.addMark(g,m,i.create(f(f({},h.attrs),t)))}})})}),!0)}}),vn=Object.freeze({__proto__:null,wrapIn:(e,t={})=>({state:n,dispatch:r})=>{const s=T(e,n.schema);return(0,O.ym)(s,t)(n,r)}}),yn=Object.freeze({__proto__:null,wrapInList:(e,t={})=>({state:n,dispatch:r})=>{const s=T(e,n.schema);return(0,ht.KI)(s,t)(n,r)}});function it(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return I(f({},t),{schema:t.schema,plugins:t.plugins,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}})}L.create({name:"commands",addCommands:()=>f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f(f({},he),me),ge),ve),ye),be),Me),ke),we),_e),xe),Te),Oe),Ce),Ie),Le),Ne),He),je),Re),ze),De),Fe),Ve),Ke),We),Ge),Je),Ye),Ue),qe),Xe),Qe),Ze),tn),en),nn),rn),on),an),ln),un),dn),pn),fn),hn),mn),gn),vn),yn)}),L.create({name:"editable",addProseMirrorPlugins(){return[new b.Sy({key:new b.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),L.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new b.Sy({key:new b.H$("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}});class at{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:r}=this,{view:s}=n,{tr:o}=r,i=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([a,c])=>[a,(...u)=>{const d=c(...u)(i);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a=[],c=!!t,l=t||o.tr,d=I(f({},Object.fromEntries(Object.entries(r).map(([p,h])=>[p,(...m)=>{const v=this.buildProps(l,n),M=h(...m)(v);return a.push(M),d}]))),{run:()=>(!c&&n&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),a.every(p=>!0===p))});return d}createCan(t){const{rawCommands:n,state:r}=this,s=void 0,o=t||r.tr,i=this.buildProps(o,s),a=Object.fromEntries(Object.entries(n).map(([c,l])=>[c,(...u)=>l(...u)(I(f({},i),{dispatch:s}))]));return I(f({},a),{chain:()=>this.createChain(o,s)})}buildProps(t,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s;o.storedMarks&&t.setStoredMarks(o.storedMarks);const a={tr:t,editor:s,view:i,state:it({state:o,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([c,l])=>[c,(...u)=>l(...u)(a)]))}};return a}}L.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:c,doc:l}=a,{empty:u,$anchor:d}=c,{pos:p,parent:h}=d,g=b.Y1.atStart(l).from===p;return!(!(u&&g&&h.type.isTextblock)||h.textContent.length)&&i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s=f({},r),o=I(f({},r),{"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()});return et()||Ht()?o:s},addProseMirrorPlugins(){return[new b.Sy({key:new b.H$("clearDocument"),appendTransaction:(e,t,n)=>{if(!e.some(g=>g.docChanged)||t.doc.eq(n.doc))return;const{empty:s,from:o,to:i}=t.selection,a=b.Y1.atStart(t.doc).from,c=b.Y1.atEnd(t.doc).to,l=o===a&&i===c,u=0===n.doc.textBetween(0,n.doc.content.size," "," ").length;if(s||!l||!u)return;const d=n.tr,p=it({state:n,transaction:d}),{commands:h}=new at({editor:this.editor,state:p});return h.clearNodes(),d.steps.length?d:void 0}})]}}),L.create({name:"tabindex",addProseMirrorPlugins(){return[new b.Sy({key:new b.H$("tabindex"),props:{attributes:()=>{if(this.editor.isEditable)return{tabindex:"0"}}}})]}});class X{constructor(t){this.find=t.find,this.handler=t.handler}}class Gt{constructor(t){this.find=t.find,this.handler=t.handler}}function C(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r=f({},t);return Object.entries(n).forEach(([s,o])=>{r[s]=r[s]?"class"===s?[r[s],o].join(" "):"style"===s?[r[s],o].join("; "):o:o}),r},{})}class P{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=f(f({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=k(y(this,"addOptions",{name:this.name}))),this.storage=k(y(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new P(t)}configure(t={}){const n=this.extend();return n.options=Z(this.options,t),n.storage=k(y(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new P(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=k(y(n,"addOptions",{name:n.name})),n.storage=k(y(n,"addStorage",{name:n.name,options:n.options})),n}}class W{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config=f(f({},this.config),t),this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=k(y(this,"addOptions",{name:this.name}))),this.storage=k(y(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new W(t)}configure(t={}){const n=this.extend();return n.options=Z(this.options,t),n.storage=k(y(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new W(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=k(y(n,"addOptions",{name:n.name})),n.storage=k(y(n,"addStorage",{name:n.name,options:n.options})),n}}function Qt(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(s=>{const i=bt(n.resolve(e-1),s.type);!i||r.push(f({mark:s},i))}):n.nodesBetween(e,t,(s,o)=>{r.push(...s.marks.map(i=>({from:o,to:o+s.nodeSize,mark:i})))}),r}function J(e){return new X({find:e.find,handler:({state:t,range:n,match:r})=>{const s=k(e.getAttributes,void 0,r);if(!1===s||null===s)return null;const{tr:o}=t,i=r[r.length-1],a=r[0];let c=n.to;if(i){const l=a.search(/\S/),u=n.from+a.indexOf(i),d=u+i.length;if(Qt(n.from,n.to,t.doc).filter(h=>h.mark.type.excluded.find(m=>m===e.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;d<n.to&&o.delete(d,n.to),u>n.from&&o.delete(n.from+l,u),c=n.from+l+i.length,o.addMark(n.from+l,c,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}function Tt(e){return new X({find:e.find,handler:({state:t,range:n,match:r})=>{const s=t.doc.resolve(n.from),o=k(e.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,o)}})}function Et(e){return new X({find:e.find,handler:({state:t,range:n,match:r})=>{const s=k(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),c=a&&(0,B.nd)(a,e.type,s);if(!c)return null;o.wrap(a,c);const l=o.doc.resolve(n.from-1).nodeBefore;l&&l.type===e.type&&(0,B.Mn)(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,l))&&o.join(n.from-1)}})}function Y(e){return new Gt({find:e.find,handler:({state:t,range:n,match:r})=>{const s=k(e.getAttributes,void 0,r);if(!1===s||null===s)return null;const{tr:o}=t,i=r[r.length-1],a=r[0];let c=n.to;if(i){const l=a.search(/\S/),u=n.from+a.indexOf(i),d=u+i.length;if(Qt(n.from,n.to,t.doc).filter(h=>h.mark.type.excluded.find(m=>m===e.type&&m!==h.mark.type)).filter(h=>h.to>u).length)return null;d<n.to&&o.delete(d,n.to),u>n.from&&o.delete(n.from+l,u),c=n.from+l+i.length,o.addMark(n.from+l,c,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}const Kn=/^\s*>\s$/,Wn=P.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return["blockquote",C(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Et({find:Kn,type:this.type})]}}),Gn=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,Jn=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,Yn=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,Un=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,qn=W.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],renderHTML({HTMLAttributes:e}){return["strong",C(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[J({find:Gn,type:this.type}),J({find:Yn,type:this.type})]},addPasteRules(){return[Y({find:Jn,type:this.type}),Y({find:Un,type:this.type})]}}),Xn=/^\s*([-+*])\s$/,Qn=P.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",C(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[Et({find:Xn,type:this.type})]}}),Zn=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,tr=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,er=W.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",C(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[J({find:Zn,type:this.type})]},addPasteRules(){return[Y({find:tr,type:this.type})]}}),nr=/^```([a-z]+)?[\s\n]$/,rr=/^~~~([a-z]+)?[\s\n]$/,sr=P.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;return[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",C(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection;return!(!e||t.parent.type.name!==this.name)&&!(1!==t.pos&&t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith("\n\n");return!(!o||!i)&&e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||s.parentOffset!==s.parent.nodeSize-2)return!1;const a=s.after();return void 0!==a&&!r.nodeAt(a)&&e.commands.exitCode()}}},addInputRules(){return[Tt({find:nr,type:this.type,getAttributes:e=>({language:e[1]})}),Tt({find:rr,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new b.Sy({key:new b.H$("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=null==s?void 0:s.mode;if(!n||!o)return!1;const{tr:i}=e.state;return i.replaceSelectionWith(this.type.create({language:o})),i.setSelection(b.Bs.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.insertText(n.replace(/\r\n?/g,"\n")),i.setMeta("paste",!0),e.dispatch(i),!0}}})]}}),or=P.create({name:"doc",topNode:!0,content:"block+"});var $=function(t,n){var r=this;this.editorView=t,this.width=n.width||1,this.color=n.color||"black",this.class=n.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map(function(s){var o=function(i){return r[s](i)};return t.dom.addEventListener(s,o),{name:s,handler:o}})};$.prototype.destroy=function(){var t=this;this.handlers.forEach(function(n){return t.editorView.dom.removeEventListener(n.name,n.handler)})},$.prototype.update=function(t,n){null!=this.cursorPos&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())},$.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},$.prototype.updateOverlay=function(){var n,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var r=t.nodeBefore,s=t.nodeAfter;if(r||s){var o=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0)).getBoundingClientRect(),i=r?o.bottom:o.top;r&&s&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!n){var a=this.editorView.coordsAtPos(this.cursorPos);n={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}var l,u,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!c||c==document.body&&"static"==getComputedStyle(c).position)l=-pageXOffset,u=-pageYOffset;else{var d=c.getBoundingClientRect();l=d.left-c.scrollLeft,u=d.top-c.scrollTop}this.element.style.left=n.left-l+"px",this.element.style.top=n.top-u+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"},$.prototype.scheduleRemoval=function(t){var n=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return n.setCursor(null)},t)},$.prototype.dragover=function(t){if(this.editorView.editable){var n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o="function"==typeof s?s(this.editorView,n):s;if(n&&!o){var i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(i=(0,B.nj)(this.editorView.state.doc,i,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(i),this.scheduleRemoval(5e3)}}},$.prototype.dragend=function(){this.scheduleRemoval(20)},$.prototype.drop=function(){this.scheduleRemoval(20)},$.prototype.dragleave=function(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)};const ar=L.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:null}),addProseMirrorPlugins(){return[(e=this.options,void 0===e&&(e={}),new b.Sy({view:function(n){return new $(n,e)}}))];var e}});var N=function(e){function t(n){e.call(this,n,n)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.map=function(r,s){var o=r.resolve(s.map(this.head));return t.valid(o)?new t(o):e.near(o)},t.prototype.content=function(){return H.p2.empty},t.prototype.eq=function(r){return r instanceof t&&r.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(r,s){if("number"!=typeof s.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(r.resolve(s.pos))},t.prototype.getBookmark=function(){return new ct(this.anchor)},t.valid=function(r){var s=r.parent;if(s.isTextblock||!function cr(e){for(var t=e.depth;t>=0;t--){var n=e.index(t),r=e.node(t);if(0!=n)for(var s=r.child(n-1);;s=s.lastChild){if(0==s.childCount&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(r)||!function lr(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var s=r.child(n);;s=s.firstChild){if(0==s.childCount&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(r))return!1;var o=s.type.spec.allowGapCursor;if(null!=o)return o;var i=s.contentMatchAt(r.index()).defaultType;return i&&i.isTextblock},t.findFrom=function(r,s,o){t:for(;;){if(!o&&t.valid(r))return r;for(var i=r.pos,a=null,c=r.depth;;c--){var l=r.node(c);if(s>0?r.indexAfter(c)<l.childCount:r.index(c)>0){a=l.child(s>0?r.indexAfter(c):r.index(c)-1);break}if(0==c)return null;var u=r.doc.resolve(i+=s);if(t.valid(u))return u}for(;;){var d=s>0?a.firstChild:a.lastChild;if(!d){if(a.isAtom&&!a.isText&&!b.qv.isSelectable(a)){r=r.doc.resolve(i+a.nodeSize*s),o=!1;continue t}break}a=d;var p=r.doc.resolve(i+=s);if(t.valid(p))return p}return null}},t}(b.Y1);N.prototype.visible=!1,b.Y1.jsonID("gapcursor",N);var ct=function(t){this.pos=t};ct.prototype.map=function(t){return new ct(t.map(this.pos))},ct.prototype.resolve=function(t){var n=t.resolve(this.pos);return N.valid(n)?new N(n):b.Y1.near(n)};var dr=(0,de.$)({ArrowLeft:lt("horiz",-1),ArrowRight:lt("horiz",1),ArrowUp:lt("vert",-1),ArrowDown:lt("vert",1)});function lt(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(r,s,o){var i=r.selection,a=t>0?i.$to:i.$from,c=i.empty;if(i instanceof b.Bs){if(!o.endOfTextblock(n)||0==a.depth)return!1;c=!1,a=r.doc.resolve(t>0?a.after():a.before())}var l=N.findFrom(a,t,c);return!!l&&(s&&s(r.tr.setSelection(new N(l))),!0)}}function pr(e,t,n){if(!e.editable)return!1;var r=e.state.doc.resolve(t);if(!N.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(o>-1&&b.qv.isSelectable(e.state.doc.nodeAt(o))||(e.dispatch(e.state.tr.setSelection(new N(r))),0))}function fr(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof N))return!1;var r=e.state.selection.$from,s=r.parent.contentMatchAt(r.index()).findWrapping(e.state.schema.nodes.text);if(!s)return!1;for(var o=H.HY.empty,i=s.length-1;i>=0;i--)o=H.HY.from(s[i].createAndFill(null,o));var a=e.state.tr.replace(r.pos,r.pos,new H.p2(o,0,0));return a.setSelection(b.Bs.near(a.doc.resolve(r.pos+1))),e.dispatch(a),!1}function hr(e){if(!(e.selection instanceof N))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",It.EH.create(e.doc,[It.p.widget(e.selection.head,t,{key:"gapcursor"})])}const mr=L.create({name:"gapCursor",addProseMirrorPlugins:()=>[new b.Sy({props:{decorations:hr,createSelectionBetween:function(t,n,r){if(n.pos==r.pos&&N.valid(r))return new N(r)},handleClick:pr,handleKeyDown:dr,handleDOMEvents:{beforeinput:fr}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!==(t=k(y(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),gr=P.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",C(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,c=o||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:l,dispatch:u})=>{if(u&&c&&i){const d=c.filter(p=>a.includes(p.type.name));l.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),vr=P.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,C(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>I(f({},e),{[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>Tt({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var E=function(){};E.prototype.append=function(t){return t.length?(t=E.from(t),!this.length&&t||t.length<200&&this.leafAppend(t)||this.length<200&&t.leafPrepend(this)||this.appendInner(t)):this},E.prototype.prepend=function(t){return t.length?E.from(t).append(this):this},E.prototype.appendInner=function(t){return new yr(this,t)},E.prototype.slice=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=this.length),t>=n?E.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))},E.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},E.prototype.forEach=function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)},E.prototype.map=function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=this.length);var s=[];return this.forEach(function(o,i){return s.push(t(o,i))},n,r),s},E.from=function(t){return t instanceof E?t:t&&t.length?new Zt(t):E.empty};var Zt=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,o){return 0==s&&o==this.length?this:new t(this.values.slice(s,o))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,o,i,a){for(var c=o;c<i;c++)if(!1===s(this.values[c],a+c))return!1},t.prototype.forEachInvertedInner=function(s,o,i,a){for(var c=o-1;c>=i;c--)if(!1===s(this.values[c],a+c))return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=200)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=200)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(E);E.empty=new Zt([]);var yr=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,o,i){var a=this.left.length;if(s<a&&!1===this.left.forEachInner(r,s,Math.min(o,a),i)||o>a&&!1===this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,o)-a,i+a))return!1},t.prototype.forEachInvertedInner=function(r,s,o,i){var a=this.left.length;if(s>a&&!1===this.right.forEachInvertedInner(r,s-a,Math.max(o,a)-a,i+a)||o<a&&!1===this.left.forEachInvertedInner(r,Math.min(s,a),o,i))return!1},t.prototype.sliceInner=function(r,s){if(0==r&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(E);const te=E;var A=function(t,n){this.items=t,this.eventCount=n};A.prototype.popEvent=function(t,n){var i,a,r=this;if(0==this.eventCount)return null;for(var s=this.items.length;;s--)if(this.items.get(s-1).selection){--s;break}n&&(i=this.remapping(s,this.items.length),a=i.maps.length);var l,u,c=t.tr,d=[],p=[];return this.items.forEach(function(h,g){if(!h.step)return i||(i=r.remapping(s,g+1),a=i.maps.length),a--,void p.push(h);if(i){p.push(new j(h.map));var v,m=h.step.map(i.slice(a));m&&c.maybeStep(m).doc&&d.push(new j(v=c.mapping.maps[c.mapping.maps.length-1],null,null,d.length+p.length)),a--,v&&i.appendMap(v,a)}else c.maybeStep(h.step);return h.selection?(l=i?h.selection.map(i.slice(a)):h.selection,u=new A(r.items.slice(0,s).append(p.reverse().concat(d)),r.eventCount-1),!1):void 0},this.items.length,0),{remaining:u,transform:c,selection:l}},A.prototype.addTransform=function(t,n,r,s){for(var o=[],i=this.eventCount,a=this.items,c=!s&&a.length?a.get(a.length-1):null,l=0;l<t.steps.length;l++){var p,u=t.steps[l].invert(t.docs[l]),d=new j(t.mapping.maps[l],u,n);(p=c&&c.merge(d))&&(d=p,l?o.pop():a=a.slice(0,a.length-1)),o.push(d),n&&(i++,n=null),s||(c=d)}var h=i-r.depth;return h>wr&&(a=function kr(e,t){var n;return e.forEach(function(r,s){if(r.selection&&0==t--)return n=s,!1}),e.slice(n)}(a,h),i-=h),new A(a.append(o),i)},A.prototype.remapping=function(t,n){var r=new B.vs;return this.items.forEach(function(s,o){r.appendMap(s.map,null!=s.mirrorOffset&&o-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:null)},t,n),r},A.prototype.addMaps=function(t){return 0==this.eventCount?this:new A(this.items.append(t.map(function(n){return new j(n)})),this.eventCount)},A.prototype.rebased=function(t,n){if(!this.eventCount)return this;var r=[],s=Math.max(0,this.items.length-n),o=t.mapping,i=t.steps.length,a=this.eventCount;this.items.forEach(function(h){h.selection&&a--},s);var c=n;this.items.forEach(function(h){var g=o.getMirror(--c);if(null!=g){i=Math.min(i,g);var m=o.maps[g];if(h.step){var v=t.steps[g].invert(t.docs[g]),M=h.selection&&h.selection.map(o.slice(c+1,g));M&&a++,r.push(new j(m,v,M))}else r.push(new j(m))}},s);for(var l=[],u=n;u<i;u++)l.push(new j(o.maps[u]));var d=this.items.slice(0,s).append(l).append(r),p=new A(d,a);return p.emptyItemCount()>500&&(p=p.compress(this.items.length-r.length)),p},A.prototype.emptyItemCount=function(){var t=0;return this.items.forEach(function(n){n.step||t++}),t},A.prototype.compress=function(t){void 0===t&&(t=this.items.length);var n=this.remapping(0,t),r=n.maps.length,s=[],o=0;return this.items.forEach(function(i,a){if(a>=t)s.push(i),i.selection&&o++;else if(i.step){var c=i.step.map(n.slice(r)),l=c&&c.getMap();if(r--,l&&n.appendMap(l,r),c){var u=i.selection&&i.selection.map(n.slice(r));u&&o++;var p,d=new j(l.invert(),c,u),h=s.length-1;(p=s.length&&s[h].merge(d))?s[h]=p:s.push(d)}}else i.map&&r--},this.items.length,0),new A(te.from(s.reverse()),o)},A.empty=new A(te.empty,0);var j=function(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s};j.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new j(n.getMap().invert(),n,this.selection)}};var F=function(t,n,r,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s},wr=20;function ee(e){var t=[];return e.forEach(function(n,r,s,o){return t.push(s,o)}),t}function Ot(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var s=t.map(e[r],1),o=t.map(e[r+1],-1);s<=o&&n.push(s,o)}return n}function ne(e,t,n,r){var s=dt(t),o=R.get(t).spec.config,i=(r?e.undone:e.done).popEvent(t,s);if(i){var a=i.selection.resolve(i.transform.doc),c=(r?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,s),l=new F(r?c:i.remaining,r?i.remaining:c,null,0);n(i.transform.setSelection(a).setMeta(R,{redo:r,historyState:l}).scrollIntoView())}}var Ct=!1,re=null;function dt(e){var t=e.plugins;if(re!=t){Ct=!1,re=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Ct=!0;break}}return Ct}var R=new b.H$("history"),se=new b.H$("closeHistory");function oe(e,t){var n=R.getState(e);return!(!n||0==n.done.eventCount||(t&&ne(n,e,t,!1),0))}function ie(e,t){var n=R.getState(e);return!(!n||0==n.undone.eventCount||(t&&ne(n,e,t,!0),0))}const Tr=L.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>oe(e,t),redo:()=>({state:e,dispatch:t})=>ie(e,t)}),addProseMirrorPlugins(){return[(e=this.options,new b.Sy({key:R,state:{init:function(){return new F(A.empty,A.empty,null,0)},apply:function(n,r,s){return function _r(e,t,n,r){var o,s=n.getMeta(R);if(s)return s.historyState;n.getMeta(se)&&(e=new F(e.done,e.undone,null,0));var i=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(i&&i.getMeta(R))return i.getMeta(R).redo?new F(e.done.addTransform(n,null,r,dt(t)),e.undone,ee(n.mapping.maps[n.steps.length-1]),e.prevTime):new F(e.done,e.undone.addTransform(n,null,r,dt(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||i&&!1===i.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new F(e.done.rebased(n,o),e.undone.rebased(n,o),Ot(e.prevRanges,n.mapping),e.prevTime):new F(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Ot(e.prevRanges,n.mapping),e.prevTime);var a=0==e.prevTime||!i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function Sr(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach(function(r,s){for(var o=0;o<t.length;o+=2)r<=t[o+1]&&s>=t[o]&&(n=!0)}),n}(n,e.prevRanges)),c=i?Ot(e.prevRanges,n.mapping):ee(n.mapping.maps[n.steps.length-1]);return new F(e.done.addTransform(n,a?t.selection.getBookmark():null,r,dt(t)),A.empty,c,n.time)}(r,s,n,e)}},config:e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},props:{handleDOMEvents:{beforeinput:function(n,r){var s="historyUndo"==r.inputType?oe(n.state,n.dispatch):"historyRedo"==r.inputType&&ie(n.state,n.dispatch);return s&&r.preventDefault(),s}}}}))];var e},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),Er=P.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",C(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e})=>e().insertContent({type:this.name}).command(({tr:t,dispatch:n})=>{var r;if(n){const{$to:s}=t.selection,o=s.end();if(s.nodeAfter)t.setSelection(b.Bs.create(t.doc,s.pos));else{const i=null===(r=s.parent.type.contentMatch.defaultType)||void 0===r?void 0:r.create();i&&(t.insert(o,i),t.setSelection(b.Bs.create(t.doc,o)))}t.scrollIntoView()}return!0}).run()}},addInputRules(){return[(e={find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type},new X({find:e.find,handler:({state:t,range:n,match:r})=>{const s=k(e.getAttributes,void 0,r)||{},{tr:o}=t,i=n.from;let a=n.to;if(r[1]){let l=i+r[0].lastIndexOf(r[1]);l>a?l=a:a=l+r[1].length,o.insertText(r[0][r[0].length-1],i+r[0].length-1),o.replaceWith(l,a,e.type.create(s))}else r[0]&&o.replaceWith(i,a,e.type.create(s))}}))];var e}}),Ar=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,Or=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,Cr=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,Ir=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Pr=W.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:e}){return["em",C(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[J({find:Ar,type:this.type}),J({find:Cr,type:this.type})]},addPasteRules(){return[Y({find:Or,type:this.type}),Y({find:Ir,type:this.type})]}}),Br=P.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",C(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Lr=/^(\d+)\.\s$/,Nr=P.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){const r=e,{start:t}=r,n=ue(r,["start"]);return 1===t?["ol",C(this.options.HTMLAttributes,n),0]:["ol",C(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[Et({find:Lr,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]})]}}),Hr=P.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",C(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),$r=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,jr=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Rr=W.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",C(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[J({find:$r,type:this.type})]},addPasteRules(){return[Y({find:jr,type:this.type})]}}),zr=P.create({name:"text",group:"inline"}),Dr=L.create({name:"starterKit",addExtensions(){var e,t,n,r,s,o,i,a,c,l,u,d,p,h,g,m,v,M;const w=[];return!1!==this.options.blockquote&&w.push(Wn.configure(null===(e=this.options)||void 0===e?void 0:e.blockquote)),!1!==this.options.bold&&w.push(qn.configure(null===(t=this.options)||void 0===t?void 0:t.bold)),!1!==this.options.bulletList&&w.push(Qn.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&w.push(er.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&w.push(sr.configure(null===(s=this.options)||void 0===s?void 0:s.codeBlock)),!1!==this.options.document&&w.push(or.configure(null===(o=this.options)||void 0===o?void 0:o.document)),!1!==this.options.dropcursor&&w.push(ar.configure(null===(i=this.options)||void 0===i?void 0:i.dropcursor)),!1!==this.options.gapcursor&&w.push(mr.configure(null===(a=this.options)||void 0===a?void 0:a.gapcursor)),!1!==this.options.hardBreak&&w.push(gr.configure(null===(c=this.options)||void 0===c?void 0:c.hardBreak)),!1!==this.options.heading&&w.push(vr.configure(null===(l=this.options)||void 0===l?void 0:l.heading)),!1!==this.options.history&&w.push(Tr.configure(null===(u=this.options)||void 0===u?void 0:u.history)),!1!==this.options.horizontalRule&&w.push(Er.configure(null===(d=this.options)||void 0===d?void 0:d.horizontalRule)),!1!==this.options.italic&&w.push(Pr.configure(null===(p=this.options)||void 0===p?void 0:p.italic)),!1!==this.options.listItem&&w.push(Br.configure(null===(h=this.options)||void 0===h?void 0:h.listItem)),!1!==this.options.orderedList&&w.push(Nr.configure(null===(g=this.options)||void 0===g?void 0:g.orderedList)),!1!==this.options.paragraph&&w.push(Hr.configure(null===(m=this.options)||void 0===m?void 0:m.paragraph)),!1!==this.options.strike&&w.push(Rr.configure(null===(v=this.options)||void 0===v?void 0:v.strike)),!1!==this.options.text&&w.push(zr.configure(null===(M=this.options)||void 0===M?void 0:M.text)),w}})}}]);