"use strict";(self.webpackChunkmix_portal=self.webpackChunkmix_portal||[]).push([[607],{4607:(k,m,t)=>{t.r(m),t.d(m,{ROUTES:()=>O});var i=t(3075),a=t(573),c=t(8865),u=t(343),p=t(3900),e=t(5e3),f=t(6696),v=t(9808),g=t(6679),h=t(3347),b=t(3191),x=t(6821),C=t(9367),y=t(9791),S=t(9343),d=t(1115),E=t(4601);function L(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",5),e.\u0275\u0275element(1,"tui-error",19),e.\u0275\u0275elementEnd()),2&n){const o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("error",o.loginError)}}const O=[{path:"login",component:(()=>{class n{constructor(o,r,l,P,T){this.fb=o,this.shareSetting=r,this.authSrv=l,this.route=P,this.alertService=T,this.loading=!1,this.loginError=new c.T8("Failed to login, please re-check your Username or Password"),this.showError=!1,this.signInForm=this.fb.group({userName:["",i.Validators.required],password:["",i.Validators.required],rememberPassword:[!0]})}submitForm(){this.showError=!1,a.hf.validateForm(this.signInForm)&&(this.loading=!0,this.shareSetting.getGlobalSetting().pipe((0,p.w)(o=>this.authSrv.login(this.signInForm.value,o.apiEncryptKey))).subscribe({next:()=>this.handleLoginSuccess(),error:()=>this.handleLoginError()}))}handleLoginSuccess(){this.loading=!1,this.alertService.open("Successfully login!",{status:"success"}).subscribe();let o=localStorage.getItem("redirectUrl");(!o||"/auth/login"===o)&&(o="/portal"),this.route.navigateByUrl(o).then(()=>localStorage.removeItem("redirectUrl"))}handleLoginError(){this.loading=!1,this.showError=!0,this.alertService.open("Error when login, please try again!",{status:"error"}).subscribe()}}return n.\u0275fac=function(o){return new(o||n)(e.\u0275\u0275directiveInject(i.FormBuilder),e.\u0275\u0275directiveInject(a.II),e.\u0275\u0275directiveInject(a.Q5),e.\u0275\u0275directiveInject(f.F0),e.\u0275\u0275directiveInject(u.J9))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["mix-spa-login"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:26,vars:9,consts:[[1,"login-page",3,"formGroup"],[1,"mask","bg-gradient-info","opacity-8"],[1,"login-form-logo"],[1,"login-form","mix-form","blur"],[1,"mix-form__header"],[1,"mix-form__row"],["tuiLabel","",3,"label"],["tuiTextfieldSize","m","formControlName","userName",3,"tuiTextfieldLabelOutside"],["type","text","tuiTextfield",""],["formControlName","userName"],["tuiTextfieldSize","m","formControlName","password",3,"tuiTextfieldLabelOutside"],["type","password","tuiTextfield","",3,"keyup.enter"],["formControlName","password"],["formControlName","rememberPassword"],["class","mix-form__row",4,"ngIf"],[1,"mix-form__row","login-form__submit"],["tuiButton","",3,"disabled","showLoader","click"],[1,"mix-form__toolbar-right"],["tuiLink","",3,"pseudo"],[3,"error"]],template:function(o,r){1&o&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"span",1)(2,"div",2),e.\u0275\u0275elementStart(3,"div",3)(4,"div",4),e.\u0275\u0275text(5,"Sign-in"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",5)(7,"label",6)(8,"tui-input",7),e.\u0275\u0275element(9,"input",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"tui-field-error",9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",5)(12,"label",6)(13,"tui-input",10)(14,"input",11),e.\u0275\u0275listener("keyup.enter",function(){return r.submitForm()}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(15,"tui-field-error",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",5)(17,"tui-checkbox-labeled",13),e.\u0275\u0275text(18," Remember password "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(19,L,2,1,"div",14),e.\u0275\u0275elementStart(20,"div",15)(21,"button",16),e.\u0275\u0275listener("click",function(){return r.submitForm()}),e.\u0275\u0275text(22,"Let's go"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"div",17)(24,"button",18),e.\u0275\u0275text(25,"Forgot password"),e.\u0275\u0275elementEnd()()()()()),2&o&&(e.\u0275\u0275property("formGroup",r.signInForm),e.\u0275\u0275advance(7),e.\u0275\u0275property("label","User Name:"),e.\u0275\u0275advance(1),e.\u0275\u0275property("tuiTextfieldLabelOutside",!0),e.\u0275\u0275advance(4),e.\u0275\u0275property("label","Password:"),e.\u0275\u0275advance(1),e.\u0275\u0275property("tuiTextfieldLabelOutside",!0),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",r.showError),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",r.loading)("showLoader",r.loading),e.\u0275\u0275advance(3),e.\u0275\u0275property("pseudo",!0))},dependencies:[a.Gn,v.O5,i.NgControlStatus,i.NgControlStatusGroup,i.FormGroupDirective,i.FormControlName,g.K3,g.wU,x.MB,C.v0,y.V,S.A,h.p,d.xT,d.sz,b.y,E.v],styles:[".login-page[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;background:url(/assets/images/backgrounds/curved.jpg);background-size:cover;background-position:50%}.login-page[_ngcontent-%COMP%]   .login-form-logo[_ngcontent-%COMP%]{width:200px;height:50px;margin-bottom:25px;background-color:var(--tui-primary);-webkit-mask:url(/assets/images/mixcore-logo-red-2.svg) no-repeat 50% 50%;mask:url(/assets/images/mixcore-logo-red-2.svg) no-repeat 50% 50%}.login-page[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{border-radius:20px;width:350px;display:flex;flex-direction:column;align-items:center;padding:0 2rem;box-sizing:border-box}.login-page[_ngcontent-%COMP%]   .login-form__submit[_ngcontent-%COMP%]{margin-top:2rem;background-size:cover;background-position:50%}.login-page[_ngcontent-%COMP%]   .login-form__submit[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%}.login-page[_ngcontent-%COMP%]   .login-form__submit[_ngcontent-%COMP%]   .login-form-logo[_ngcontent-%COMP%]{width:200px;height:50px;margin-bottom:25px;background-color:var(--tui-primary);-webkit-mask:url(/assets/images/mixcore-logo-red-2.svg) no-repeat 50% 50%;mask:url(/assets/images/mixcore-logo-red-2.svg) no-repeat 50% 50%}"]}),n})()},{path:"**",redirectTo:"login"}]}}]);