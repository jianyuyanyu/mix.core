"use strict";(self.webpackChunkmix_cms=self.webpackChunkmix_cms||[]).push([[881],{1881:(Nr,Tt,N)=>{N.r(Tt),N.d(Tt,{default:()=>Br});var b=N(647),A=N(9163),x=N(491),I=N(8383),lt=N(4027),Et=N(805),re=N(8914);function ut(e){return"Object"===function se(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function U(e,t){const n={...e};return ut(e)&&ut(t)&&Object.keys(t).forEach(r=>{ut(t[r])?r in e?n[r]=U(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}function M(e,t,...n){return function At(e){return"function"==typeof e}(e)?t?e.bind(t)(...n):e(...n):e}function v(e,t,n){return void 0===e.config[t]&&e.parent?v(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?v(e.parent,t,n):null}):e.config[t]}class C{constructor(t={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=M(v(this,"addOptions",{name:this.name}))),this.storage=M(v(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new C(t)}configure(t={}){const n=this.extend();return n.options=U(this.options,t),n.storage=M(v(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new C(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=M(v(n,"addOptions",{name:n.name})),n.storage=M(v(n,"addStorage",{name:n.name,options:n.options})),n}}function dt(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}C.create({name:"clipboardTextSerializer",addProseMirrorPlugins(){return[new b.Sy({key:new b.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:s}=t,{ranges:o}=s;return function Ct(e,t,n){const{from:r,to:s}=t,{blockSeparator:o="\n\n",textSerializers:i={}}=n||{};let a="",c=!0;return e.nodesBetween(r,s,(l,u,d,p)=>{var f;const m=i?.[l.type.name];m?(l.isBlock&&!c&&(a+=o,c=!0),a+=m({node:l,pos:u,parent:d,index:p,range:t})):l.isText?(a+=null===(f=l?.text)||void 0===f?void 0:f.slice(Math.max(r,u)-u,s-u),c=!1):l.isBlock&&!c&&(a+=o,c=!0)}),a}(r,{from:Math.min(...o.map(u=>u.$from.pos)),to:Math.max(...o.map(u=>u.$to.pos))},{textSerializers:dt(n)})}}})]}});var ie=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=window?.getSelection())||void 0===n||n.removeAllRanges())}),!0)}),ae=Object.freeze({__proto__:null,clearContent:(e=!1)=>({commands:t})=>t.setContent("",e)}),ce=Object.freeze({__proto__:null,clearNodes:()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:i})=>{e.doc.nodesBetween(o.pos,i.pos,(a,c)=>{if(a.type.isText)return;const{doc:l,mapping:u}=t,d=l.resolve(u.map(c)),p=l.resolve(u.map(c+a.nodeSize)),f=d.blockRange(p);if(!f)return;const m=(0,A.k9)(f);if(a.type.isTextblock){const{defaultType:h}=d.parent.contentMatchAt(d.index());t.setNodeMarkup(f.start,h)}(m||0===m)&&t.lift(f,m)})}),!0}}),le=Object.freeze({__proto__:null,command:e=>t=>e(t)}),ue=Object.freeze({__proto__:null,createParagraphNear:()=>({state:e,dispatch:t})=>(0,x.mD)(e,t)});function w(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var de=Object.freeze({__proto__:null,deleteNode:e=>({tr:t,state:n,dispatch:r})=>{const s=w(e,n.schema),o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const c=o.before(i),l=o.after(i);t.delete(c,l).scrollIntoView()}return!0}return!1}}),pe=Object.freeze({__proto__:null,deleteRange:e=>({tr:t,dispatch:n})=>{const{from:r,to:s}=e;return n&&t.delete(r,s),!0}}),fe=Object.freeze({__proto__:null,deleteSelection:()=>({state:e,dispatch:t})=>(0,x.NE)(e,t)}),he=Object.freeze({__proto__:null,enter:()=>({commands:e})=>e.keyboardShortcut("Enter")}),me=Object.freeze({__proto__:null,exitCode:()=>({state:e,dispatch:t})=>(0,x.uo)(e,t)});function $(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function q(e,t,n={strict:!0}){const r=Object.keys(t);return!r.length||r.every(s=>n.strict?t[s]===e[s]:function pt(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(t[s])?t[s].test(e[s]):t[s]===e[s])}function ft(e,t,n={}){return e.find(r=>r.type===t&&q(r.attrs,n))}function ge(e,t,n={}){return!!ft(e,t,n)}function ht(e,t,n={}){if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(e.parentOffset===r.offset&&0!==r.offset&&(r=e.parent.childBefore(e.parentOffset)),!r.node)return;const s=ft(r.node.marks,t,n);if(!s)return;let o=r.index,i=e.start()+r.offset,a=o+1,c=i+r.node.nodeSize;for(ft(r.node.marks,t,n);o>0&&s.isInSet(e.parent.child(o-1).marks);)o-=1,i-=e.parent.child(o).nodeSize;for(;a<e.parent.childCount&&ge(e.parent.child(a).marks,t,n);)c+=e.parent.child(a).nodeSize,a+=1;return{from:i,to:c}}var ve=Object.freeze({__proto__:null,extendMarkRange:(e,t={})=>({tr:n,state:r,dispatch:s})=>{const o=$(e,r.schema),{doc:i,selection:a}=n,{$from:c,from:l,to:u}=a;if(s){const d=ht(c,o,t);if(d&&d.from<=l&&d.to>=u){const p=b.Bs.create(i,d.from,d.to);n.setSelection(p)}}return!0}}),ye=Object.freeze({__proto__:null,first:e=>t=>{const n="function"==typeof e?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1}});function X(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function H(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}var ke=Object.freeze({__proto__:null,focus:(e=null,t)=>({editor:n,view:r,tr:s,dispatch:o})=>{t={scrollIntoView:!0,...t};const i=()=>{X()&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&null===e||!1===e)return!0;if(o&&null===e&&!function Me(e){return function Ot(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!function be(e){var t;return"class"===(null===(t=e.constructor)||void 0===t?void 0:t.toString().substring(0,5))}(e)}(e)&&e instanceof b.Bs}(n.state.selection))return i(),!0;const a=function It(e,t=null){if(!t)return null;const n=b.Y1.atStart(e),r=b.Y1.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;const s=n.from,o=r.to;return"all"===t?b.Bs.create(e,H(0,s,o),H(e.content.size,s,o)):b.Bs.create(e,H(t,s,o),H(t,s,o))}(n.state.doc,e)||n.state.selection,c=n.state.selection.eq(a);return o&&(c||s.setSelection(a),c&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0}}),we=Object.freeze({__proto__:null,forEach:(e,t)=>n=>e.every((r,s)=>t(r,{...n,index:s}))}),_e=Object.freeze({__proto__:null,insertContent:(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t)});function mt(e){const t=`<body>${e}</body>`;return(new window.DOMParser).parseFromString(t,"text/html").body}function Q(e,t,n){if(n={slice:!0,parseOptions:{},...n},"object"==typeof e&&null!==e)try{return Array.isArray(e)?I.HY.fromArray(e.map(r=>t.nodeFromJSON(r))):t.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),Q("",t,n)}if("string"==typeof e){const r=I.aw.fromSchema(t);return n.slice?r.parseSlice(mt(e),n.parseOptions).content:r.parse(mt(e),n.parseOptions)}return Q("",t,n)}var Te=Object.freeze({__proto__:null,insertContentAt:(e,t,n)=>({tr:r,dispatch:s,editor:o})=>{if(s){n={parseOptions:{},updateSelection:!0,...n};const i=Q(t,o.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions}});if("<>"===i.toString())return!0;let{from:a,to:c}="number"==typeof e?{from:e,to:e}:e,l=!0,u=!0;if(((e=>e.toString().startsWith("<"))(i)?i:[i]).forEach(p=>{p.check(),l=!!l&&p.isText&&0===p.marks.length,u=!!u&&p.isBlock}),a===c&&u){const{parent:p}=r.doc.resolve(a);p.isTextblock&&!p.type.spec.code&&!p.childCount&&(a-=1,c+=1)}l?r.insertText(t,a,c):r.replaceWith(a,c,i),n.updateSelection&&function Se(e,t,n){const r=e.steps.length-1;if(r<t)return;const s=e.steps[r];if(!(s instanceof A.Pu||s instanceof A.FC))return;let i=0;e.mapping.maps[r].forEach((a,c,l,u)=>{0===i&&(i=u)}),e.setSelection(b.Y1.near(e.doc.resolve(i),n))}(r,r.steps.length-1,-1)}return!0}}),Ee=Object.freeze({__proto__:null,joinBackward:()=>({state:e,dispatch:t})=>(0,x.al)(e,t)}),Ae=Object.freeze({__proto__:null,joinForward:()=>({state:e,dispatch:t})=>(0,x.Y_)(e,t)});function Pt(){return typeof navigator<"u"&&/Mac/.test(navigator.platform)}var Oe=Object.freeze({__proto__:null,keyboardShortcut:e=>({editor:t,view:n,tr:r,dispatch:s})=>{const o=function Ce(e){const t=e.split(/-(?!$)/);let r,s,o,i,n=t[t.length-1];"Space"===n&&(n=" ");for(let a=0;a<t.length-1;a+=1){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else{if(!/^mod$/i.test(c))throw new Error(`Unrecognized modifier name: ${c}`);X()||Pt()?i=!0:s=!0}}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}(e).split(/-(?!$)/),i=o.find(l=>!["Alt","Ctrl","Meta","Shift"].includes(l)),a=new KeyboardEvent("keydown",{key:"Space"===i?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0});return t.captureTransaction(()=>{n.someProp("handleKeyDown",l=>l(n,a))})?.steps.forEach(l=>{const u=l.map(r.mapping);u&&s&&r.maybeStep(u)}),!0}});function G(e,t,n={}){const{from:r,to:s,empty:o}=e.selection,i=t?w(t,e.schema):null,a=[];e.doc.nodesBetween(r,s,(d,p)=>{if(d.isText)return;const f=Math.max(r,p),m=Math.min(s,p+d.nodeSize);a.push({node:d,from:f,to:m})});const c=s-r,l=a.filter(d=>!i||i.name===d.node.type.name).filter(d=>q(d.node.attrs,n,{strict:!1}));return o?!!l.length:l.reduce((d,p)=>d+p.to-p.from,0)>=c}var Ie=Object.freeze({__proto__:null,lift:(e,t={})=>({state:n,dispatch:r})=>!!G(n,w(e,n.schema),t)&&(0,x.xb)(n,r)}),Pe=Object.freeze({__proto__:null,liftEmptyBlock:()=>({state:e,dispatch:t})=>(0,x.X0)(e,t)}),Be=Object.freeze({__proto__:null,liftListItem:e=>({state:t,dispatch:n})=>{const r=w(e,t.schema);return(0,lt.IB)(r)(t,n)}}),Le=Object.freeze({__proto__:null,newlineInCode:()=>({state:e,dispatch:t})=>(0,x.QK)(e,t)});function Z(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function Bt(e,t){const n="string"==typeof t?[t]:t;return Object.keys(e).reduce((r,s)=>(n.includes(s)||(r[s]=e[s]),r),{})}var Ne=Object.freeze({__proto__:null,resetAttributes:(e,t)=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=Z("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(o=w(e,r.schema)),"mark"===a&&(i=$(e,r.schema)),s&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(l,u)=>{o&&o===l.type&&n.setNodeMarkup(u,void 0,Bt(l.attrs,t)),i&&l.marks.length&&l.marks.forEach(d=>{i===d.type&&n.addMark(u,u+l.nodeSize,i.create(Bt(d.attrs,t)))})})}),!0)}}),He=Object.freeze({__proto__:null,scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0)}),$e=Object.freeze({__proto__:null,selectAll:()=>({tr:e,commands:t})=>t.setTextSelection({from:0,to:e.doc.content.size})}),je=Object.freeze({__proto__:null,selectNodeBackward:()=>({state:e,dispatch:t})=>(0,x._M)(e,t)}),Re=Object.freeze({__proto__:null,selectNodeForward:()=>({state:e,dispatch:t})=>(0,x.o)(e,t)}),ze=Object.freeze({__proto__:null,selectParentNode:()=>({state:e,dispatch:t})=>(0,x.N0)(e,t)}),De=Object.freeze({__proto__:null,selectTextblockEnd:()=>({state:e,dispatch:t})=>(0,x.nw)(e,t)}),Fe=Object.freeze({__proto__:null,selectTextblockStart:()=>({state:e,dispatch:t})=>(0,x.U9)(e,t)});var Ve=Object.freeze({__proto__:null,setContent:(e,t=!1,n={})=>({tr:r,editor:s,dispatch:o})=>{const{doc:i}=r,a=function Lt(e,t,n={}){return Q(e,t,{slice:!1,parseOptions:n})}(e,s.schema,n),c=b.Bs.create(i,0,i.content.size);return o&&r.setSelection(c).replaceSelectionWith(a,!1).setMeta("preventUpdate",!t),!0}});var Ke=Object.freeze({__proto__:null,setMark:(e,t={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:i,ranges:a}=o,c=$(e,r.schema);if(s)if(i){const l=function Nt(e,t){const n=$(t,e.schema),{from:r,to:s,empty:o}=e.selection,i=[];o?(e.storedMarks&&i.push(...e.storedMarks),i.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,s,c=>{i.push(...c.marks)});const a=i.find(c=>c.type.name===n.name);return a?{...a.attrs}:{}}(r,c);n.addStoredMark(c.create({...l,...t}))}else a.forEach(l=>{const u=l.$from.pos,d=l.$to.pos;r.doc.nodesBetween(u,d,(p,f)=>{const m=Math.max(f,u),h=Math.min(f+p.nodeSize,d);p.marks.find(y=>y.type===c)?p.marks.forEach(y=>{c===y.type&&n.addMark(m,h,c.create({...y.attrs,...t}))}):n.addMark(m,h,c.create(t))})});return!0}}),We=Object.freeze({__proto__:null,setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0)}),Ge=Object.freeze({__proto__:null,setNode:(e,t={})=>({state:n,dispatch:r,chain:s})=>{const o=w(e,n.schema);return o.isTextblock?s().command(({commands:i})=>!!(0,x.uJ)(o,t)(n)||i.clearNodes()).command(({state:i})=>(0,x.uJ)(o,t)(i,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}}),Je=Object.freeze({__proto__:null,setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,s=b.Y1.atStart(r).from,o=b.Y1.atEnd(r).to,i=H(e,s,o),a=b.qv.create(r,i);t.setSelection(a)}return!0}}),Ye=Object.freeze({__proto__:null,setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:s,to:o}="number"==typeof e?{from:e,to:e}:e,i=b.Bs.atStart(r).from,a=b.Bs.atEnd(r).to,c=H(s,i,a),l=H(o,i,a),u=b.Bs.create(r,c,l);t.setSelection(u)}return!0}}),Ue=Object.freeze({__proto__:null,sinkListItem:e=>({state:t,dispatch:n})=>{const r=w(e,t.schema);return(0,lt.bw)(r)(t,n)}});function tt(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=e.find(o=>o.type===t&&o.name===r);return!!s&&s.attribute.keepOnSplit}))}function Ht(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(s=>t?.includes(s.type.name));e.tr.ensureMarks(r)}}var Xe=Object.freeze({__proto__:null,splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:i}=t,{$from:a,$to:c}=o,u=tt(s.extensionManager.attributes,a.node().type.name,a.node().attrs);if(o instanceof b.qv&&o.node.isBlock)return!(!a.parentOffset||!(0,A.Ax)(i,a.pos)||(r&&(e&&Ht(n,s.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),0));if(!a.parent.isBlock)return!1;if(r){const d=c.parentOffset===c.parent.content.size;o instanceof b.Bs&&t.deleteSelection();const p=0===a.depth?void 0:function qe(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=d&&p?[{type:p,attrs:u}]:void 0,m=(0,A.Ax)(t.doc,t.mapping.map(a.pos),1,f);if(!f&&!m&&(0,A.Ax)(t.doc,t.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(m=!0,f=p?[{type:p,attrs:u}]:void 0),m&&(t.split(t.mapping.map(a.pos),1,f),p&&!d&&!a.parentOffset&&a.parent.type!==p)){const h=t.mapping.map(a.before()),g=t.doc.resolve(h);a.node(-1).canReplaceWith(g.index(),g.index()+1,p)&&t.setNodeMarkup(t.mapping.map(a.before()),p)}e&&Ht(n,s.extensionManager.splittableMarks),t.scrollIntoView()}return!0}}),Qe=Object.freeze({__proto__:null,splitListItem:e=>({tr:t,state:n,dispatch:r,editor:s})=>{var o;const i=w(e,n.schema),{$from:a,$to:c}=n.selection,l=n.selection.node;if(l&&l.isBlock||a.depth<2||!a.sameParent(c))return!1;const u=a.node(-1);if(u.type!==i)return!1;const d=s.extensionManager.attributes;if(0===a.parent.content.size&&a.node(-1).childCount===a.indexAfter(-1)){if(2===a.depth||a.node(-3).type!==i||a.index(-2)!==a.node(-2).childCount-1)return!1;if(r){let g=I.HY.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let W=a.depth-y;W>=a.depth-3;W-=1)g=I.HY.from(a.node(W).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,R=tt(d,a.node().type.name,a.node().attrs),F=(null===(o=i.contentMatch.defaultType)||void 0===o?void 0:o.createAndFill(R))||void 0;g=g.append(I.HY.from(i.createAndFill(null,F)||void 0));const Y=a.before(a.depth-(y-1));t.replace(Y,a.after(-k),new I.p2(g,4-y,0));let ct=-1;t.doc.nodesBetween(Y,t.doc.content.size,(W,Lr)=>{if(ct>-1)return!1;W.isTextblock&&0===W.content.size&&(ct=Lr+1)}),ct>-1&&t.setSelection(b.Bs.near(t.doc.resolve(ct))),t.scrollIntoView()}return!0}const p=c.pos===a.end()?u.contentMatchAt(0).defaultType:null,f=tt(d,u.type.name,u.attrs),m=tt(d,a.node().type.name,a.node().attrs);t.delete(a.pos,c.pos);const h=p?[{type:i,attrs:f},{type:p,attrs:m}]:[{type:i,attrs:f}];return!!(0,A.Ax)(t.doc,a.pos,2)&&(r&&t.split(a.pos,2,h).scrollIntoView(),!0)}});function gt(e){return t=>function Ze(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}function $t(e,t){const{nodeExtensions:n}=function et(e){return{baseExtensions:e.filter(s=>"extension"===s.type),nodeExtensions:e.filter(s=>"node"===s.type),markExtensions:e.filter(s=>"mark"===s.type)}}(t),r=n.find(i=>i.name===e);if(!r)return!1;const o=M(v(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"==typeof o&&o.split(" ").includes("list")}const jt=(e,t)=>{const n=gt(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const s=e.doc.nodeAt(r);return n.node.type===s?.type&&(0,A.Mn)(e.doc,n.pos)&&e.join(n.pos),!0},Rt=(e,t)=>{const n=gt(i=>i.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const s=e.doc.nodeAt(r);return n.node.type===s?.type&&(0,A.Mn)(e.doc,r)&&e.join(r),!0};var tn=Object.freeze({__proto__:null,toggleList:(e,t)=>({editor:n,tr:r,state:s,dispatch:o,chain:i,commands:a,can:c})=>{const{extensions:l}=n.extensionManager,u=w(e,s.schema),d=w(t,s.schema),{selection:p}=s,{$from:f,$to:m}=p,h=f.blockRange(m);if(!h)return!1;const g=gt(y=>$t(y.type.name,l))(p);if(h.depth>=1&&g&&h.depth-g.depth<=1){if(g.node.type===u)return a.liftListItem(d);if($t(g.node.type.name,l)&&u.validContent(g.node.content)&&o)return i().command(()=>(r.setNodeMarkup(g.pos,u),!0)).command(()=>jt(r,u)).command(()=>Rt(r,u)).run()}return i().command(()=>!!c().wrapInList(u)||a.clearNodes()).wrapInList(u).command(()=>jt(r,u)).command(()=>Rt(r,u)).run()}});var en=Object.freeze({__proto__:null,toggleMark:(e,t={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,i=$(e,r.schema);return function vt(e,t,n={}){const{empty:r,ranges:s}=e.selection,o=t?$(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(d=>!o||o.name===d.type.name).find(d=>q(d.attrs,n,{strict:!1}));let i=0;const a=[];if(s.forEach(({$from:d,$to:p})=>{const f=d.pos,m=p.pos;e.doc.nodesBetween(f,m,(h,g)=>{if(!h.isText&&!h.marks.length)return;const y=Math.max(f,g),k=Math.min(m,g+h.nodeSize);i+=k-y,a.push(...h.marks.map(F=>({mark:F,from:y,to:k})))})}),0===i)return!1;const c=a.filter(d=>!o||o.name===d.mark.type.name).filter(d=>q(d.mark.attrs,n,{strict:!1})).reduce((d,p)=>d+p.to-p.from,0),l=a.filter(d=>!o||d.mark.type!==o&&d.mark.type.excludes(o)).reduce((d,p)=>d+p.to-p.from,0);return(c>0?c+l:c)>=i}(r,i,t)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,t)}}),nn=Object.freeze({__proto__:null,toggleNode:(e,t,n={})=>({state:r,commands:s})=>{const o=w(e,r.schema),i=w(t,r.schema);return G(r,o,n)?s.setNode(i):s.setNode(o,n)}}),rn=Object.freeze({__proto__:null,toggleWrap:(e,t={})=>({state:n,commands:r})=>{const s=w(e,n.schema);return G(n,s,t)?r.lift(s):r.wrapIn(s,t)}}),sn=Object.freeze({__proto__:null,undoInputRule:()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(e))){if(t){const i=e.tr,a=o.transform;for(let c=a.steps.length-1;c>=0;c-=1)i.step(a.steps[c].invert(a.docs[c]));if(o.text){const c=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,e.schema.text(o.text,c))}else i.delete(o.from,o.to)}return!0}}return!1}}),on=Object.freeze({__proto__:null,unsetAllMarks:()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:s}=n;return r||t&&s.forEach(o=>{e.removeMark(o.$from.pos,o.$to.pos)}),!0}}),an=Object.freeze({__proto__:null,unsetMark:(e,t={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=t,{selection:a}=n,c=$(e,r.schema),{$from:l,empty:u,ranges:d}=a;if(!s)return!0;if(u&&i){let{from:p,to:f}=a;const m=null===(o=l.marks().find(g=>g.type===c))||void 0===o?void 0:o.attrs,h=ht(l,c,m);h&&(p=h.from,f=h.to),n.removeMark(p,f,c)}else d.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,c)});return n.removeStoredMark(c),!0}}),cn=Object.freeze({__proto__:null,updateAttributes:(e,t={})=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const a=Z("string"==typeof e?e:e.name,r.schema);return!!a&&("node"===a&&(o=w(e,r.schema)),"mark"===a&&(i=$(e,r.schema)),s&&n.selection.ranges.forEach(c=>{const l=c.$from.pos,u=c.$to.pos;r.doc.nodesBetween(l,u,(d,p)=>{o&&o===d.type&&n.setNodeMarkup(p,void 0,{...d.attrs,...t}),i&&d.marks.length&&d.marks.forEach(f=>{if(i===f.type){const m=Math.max(p,l),h=Math.min(p+d.nodeSize,u);n.addMark(m,h,i.create({...f.attrs,...t}))}})})}),!0)}}),ln=Object.freeze({__proto__:null,wrapIn:(e,t={})=>({state:n,dispatch:r})=>{const s=w(e,n.schema);return(0,x.ym)(s,t)(n,r)}}),un=Object.freeze({__proto__:null,wrapInList:(e,t={})=>({state:n,dispatch:r})=>{const s=w(e,n.schema);return(0,lt.KI)(s,t)(n,r)}});function nt(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...t,schema:t.schema,plugins:t.plugins,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}C.create({name:"commands",addCommands:()=>({...ie,...ae,...ce,...le,...ue,...de,...pe,...fe,...he,...me,...ve,...ye,...ke,...we,..._e,...Te,...Ee,...Ae,...Oe,...Ie,...Pe,...Be,...Le,...Ne,...He,...$e,...je,...Re,...ze,...De,...Fe,...Ve,...Ke,...We,...Ge,...Je,...Ye,...Ue,...Xe,...Qe,...tn,...en,...nn,...rn,...sn,...on,...an,...cn,...ln,...un})}),C.create({name:"editable",addProseMirrorPlugins(){return[new b.Sy({key:new b.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),C.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new b.Sy({key:new b.H$("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}});class rt{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:n,state:r}=this,{view:s}=n,{tr:o}=r,i=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([a,c])=>[a,(...u)=>{const d=c(...u)(i);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(o),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s,a=[],c=!!t,l=t||o.tr,d={...Object.fromEntries(Object.entries(r).map(([p,f])=>[p,(...h)=>{const g=this.buildProps(l,n),y=f(...h)(g);return a.push(y),d}])),run:()=>(!c&&n&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),a.every(p=>!0===p))};return d}createCan(t){const{rawCommands:n,state:r}=this,s=void 0,o=t||r.tr,i=this.buildProps(o,s);return{...Object.fromEntries(Object.entries(n).map(([c,l])=>[c,(...u)=>l(...u)({...i,dispatch:s})])),chain:()=>this.createChain(o,s)}}buildProps(t,n=!0){const{rawCommands:r,editor:s,state:o}=this,{view:i}=s;o.storedMarks&&t.setStoredMarks(o.storedMarks);const a={tr:t,editor:s,view:i,state:nt({state:o,transaction:t}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(t),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([c,l])=>[c,(...u)=>l(...u)(a)]))}};return a}}C.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:c,doc:l}=a,{empty:u,$anchor:d}=c,{pos:p,parent:f}=d,m=b.Y1.atStart(l).from===p;return!(!(u&&m&&f.type.isTextblock)||f.textContent.length)&&i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return X()||Pt()?o:s},addProseMirrorPlugins(){return[new b.Sy({key:new b.H$("clearDocument"),appendTransaction:(e,t,n)=>{if(!e.some(m=>m.docChanged)||t.doc.eq(n.doc))return;const{empty:s,from:o,to:i}=t.selection,a=b.Y1.atStart(t.doc).from,c=b.Y1.atEnd(t.doc).to,l=o===a&&i===c,u=0===n.doc.textBetween(0,n.doc.content.size," "," ").length;if(s||!l||!u)return;const d=n.tr,p=nt({state:n,transaction:d}),{commands:f}=new rt({editor:this.editor,state:p});return f.clearNodes(),d.steps.length?d:void 0}})]}}),C.create({name:"tabindex",addProseMirrorPlugins(){return[new b.Sy({key:new b.H$("tabindex"),props:{attributes:()=>{if(this.editor.isEditable)return{tabindex:"0"}}}})]}});class J{constructor(t){this.find=t.find,this.handler=t.handler}}class Ft{constructor(t){this.find=t.find,this.handler=t.handler}}function T(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([s,o])=>{r[s]=r[s]?"class"===s?[r[s],o].join(" "):"style"===s?[r[s],o].join("; "):o:o}),r},{})}class E{constructor(t={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=M(v(this,"addOptions",{name:this.name}))),this.storage=M(v(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new E(t)}configure(t={}){const n=this.extend();return n.options=U(this.options,t),n.storage=M(v(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new E(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=M(v(n,"addOptions",{name:n.name})),n.storage=M(v(n,"addStorage",{name:n.name,options:n.options})),n}}class D{constructor(t={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...t},this.name=this.config.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=M(v(this,"addOptions",{name:this.name}))),this.storage=M(v(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(t={}){return new D(t)}configure(t={}){const n=this.extend();return n.options=U(this.options,t),n.storage=M(v(n,"addStorage",{name:n.name,options:n.options})),n}extend(t={}){const n=new D(t);return n.parent=this,this.child=n,n.name=t.name?t.name:n.parent.name,t.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=M(v(n,"addOptions",{name:n.name})),n.storage=M(v(n,"addStorage",{name:n.name,options:n.options})),n}}function Yt(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(s=>{const i=ht(n.resolve(e-1),s.type);!i||r.push({mark:s,...i})}):n.nodesBetween(e,t,(s,o)=>{r.push(...s.marks.map(i=>({from:o,to:o+s.nodeSize,mark:i})))}),r}function V(e){return new J({find:e.find,handler:({state:t,range:n,match:r})=>{const s=M(e.getAttributes,void 0,r);if(!1===s||null===s)return null;const{tr:o}=t,i=r[r.length-1],a=r[0];let c=n.to;if(i){const l=a.search(/\S/),u=n.from+a.indexOf(i),d=u+i.length;if(Yt(n.from,n.to,t.doc).filter(f=>f.mark.type.excluded.find(h=>h===e.type&&h!==f.mark.type)).filter(f=>f.to>u).length)return null;d<n.to&&o.delete(d,n.to),u>n.from&&o.delete(n.from+l,u),c=n.from+l+i.length,o.addMark(n.from+l,c,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}function kt(e){return new J({find:e.find,handler:({state:t,range:n,match:r})=>{const s=t.doc.resolve(n.from),o=M(e.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,o)}})}function wt(e){return new J({find:e.find,handler:({state:t,range:n,match:r})=>{const s=M(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),c=a&&(0,A.nd)(a,e.type,s);if(!c)return null;o.wrap(a,c);const l=o.doc.resolve(n.from-1).nodeBefore;l&&l.type===e.type&&(0,A.Mn)(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,l))&&o.join(n.from-1)}})}function K(e){return new Ft({find:e.find,handler:({state:t,range:n,match:r})=>{const s=M(e.getAttributes,void 0,r);if(!1===s||null===s)return null;const{tr:o}=t,i=r[r.length-1],a=r[0];let c=n.to;if(i){const l=a.search(/\S/),u=n.from+a.indexOf(i),d=u+i.length;if(Yt(n.from,n.to,t.doc).filter(f=>f.mark.type.excluded.find(h=>h===e.type&&h!==f.mark.type)).filter(f=>f.to>u).length)return null;d<n.to&&o.delete(d,n.to),u>n.from&&o.delete(n.from+l,u),c=n.from+l+i.length,o.addMark(n.from+l,c,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}const Hn=/^\s*>\s$/,$n=E.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return["blockquote",T(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wt({find:Hn,type:this.type})]}}),jn=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))$/,Rn=/(?:^|\s)((?:\*\*)((?:[^*]+))(?:\*\*))/g,zn=/(?:^|\s)((?:__)((?:[^__]+))(?:__))$/,Dn=/(?:^|\s)((?:__)((?:[^__]+))(?:__))/g,Fn=D.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],renderHTML({HTMLAttributes:e}){return["strong",T(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[V({find:jn,type:this.type}),V({find:zn,type:this.type})]},addPasteRules(){return[K({find:Rn,type:this.type}),K({find:Dn,type:this.type})]}}),Vn=/^\s*([-+*])\s$/,Kn=E.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",T(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){return[wt({find:Vn,type:this.type})]}}),Wn=/(?:^|\s)((?:`)((?:[^`]+))(?:`))$/,Gn=/(?:^|\s)((?:`)((?:[^`]+))(?:`))/g,Jn=D.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",T(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[V({find:Wn,type:this.type})]},addPasteRules(){return[K({find:Gn,type:this.type})]}}),Yn=/^```([a-z]+)?[\s\n]$/,Un=/^~~~([a-z]+)?[\s\n]$/,qn=E.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options;return[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",T(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection;return!(!e||t.parent.type.name!==this.name)&&!(1!==t.pos&&t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith("\n\n");return!(!o||!i)&&e.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||s.parentOffset!==s.parent.nodeSize-2)return!1;const a=s.after();return void 0!==a&&!r.nodeAt(a)&&e.commands.exitCode()}}},addInputRules(){return[kt({find:Yn,type:this.type,getAttributes:e=>({language:e[1]})}),kt({find:Un,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new b.Sy({key:new b.H$("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),o=(r?JSON.parse(r):void 0)?.mode;if(!n||!o)return!1;const{tr:i}=e.state;return i.replaceSelectionWith(this.type.create({language:o})),i.setSelection(b.Bs.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.insertText(n.replace(/\r\n?/g,"\n")),i.setMeta("paste",!0),e.dispatch(i),!0}}})]}}),Xn=E.create({name:"doc",topNode:!0,content:"block+"});var P=function(t,n){var r=this;this.editorView=t,this.width=n.width||1,this.color=n.color||"black",this.class=n.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map(function(s){var o=function(i){return r[s](i)};return t.dom.addEventListener(s,o),{name:s,handler:o}})};P.prototype.destroy=function(){var t=this;this.handlers.forEach(function(n){return t.editorView.dom.removeEventListener(n.name,n.handler)})},P.prototype.update=function(t,n){null!=this.cursorPos&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())},P.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},P.prototype.updateOverlay=function(){var n,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var r=t.nodeBefore,s=t.nodeAfter;if(r||s){var o=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0)).getBoundingClientRect(),i=r?o.bottom:o.top;r&&s&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),n={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!n){var a=this.editorView.coordsAtPos(this.cursorPos);n={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}var l,u,c=this.editorView.dom.offsetParent;if(this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color),!c||c==document.body&&"static"==getComputedStyle(c).position)l=-pageXOffset,u=-pageYOffset;else{var d=c.getBoundingClientRect();l=d.left-c.scrollLeft,u=d.top-c.scrollTop}this.element.style.left=n.left-l+"px",this.element.style.top=n.top-u+"px",this.element.style.width=n.right-n.left+"px",this.element.style.height=n.bottom-n.top+"px"},P.prototype.scheduleRemoval=function(t){var n=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return n.setCursor(null)},t)},P.prototype.dragover=function(t){if(this.editorView.editable){var n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o="function"==typeof s?s(this.editorView,n):s;if(n&&!o){var i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice&&null==(i=(0,A.nj)(this.editorView.state.doc,i,this.editorView.dragging.slice)))return this.setCursor(null);this.setCursor(i),this.scheduleRemoval(5e3)}}},P.prototype.dragend=function(){this.scheduleRemoval(20)},P.prototype.drop=function(){this.scheduleRemoval(20)},P.prototype.dragleave=function(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)};const Zn=C.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:null}),addProseMirrorPlugins(){return[(e=this.options,void 0===e&&(e={}),new b.Sy({view:function(n){return new P(n,e)}}))];var e}});var O=function(e){function t(n){e.call(this,n,n)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.map=function(r,s){var o=r.resolve(s.map(this.head));return t.valid(o)?new t(o):e.near(o)},t.prototype.content=function(){return I.p2.empty},t.prototype.eq=function(r){return r instanceof t&&r.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(r,s){if("number"!=typeof s.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(r.resolve(s.pos))},t.prototype.getBookmark=function(){return new st(this.anchor)},t.valid=function(r){var s=r.parent;if(s.isTextblock||!function tr(e){for(var t=e.depth;t>=0;t--){var n=e.index(t),r=e.node(t);if(0!=n)for(var s=r.child(n-1);;s=s.lastChild){if(0==s.childCount&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(r)||!function er(e){for(var t=e.depth;t>=0;t--){var n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(var s=r.child(n);;s=s.firstChild){if(0==s.childCount&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(r))return!1;var o=s.type.spec.allowGapCursor;if(null!=o)return o;var i=s.contentMatchAt(r.index()).defaultType;return i&&i.isTextblock},t.findFrom=function(r,s,o){t:for(;;){if(!o&&t.valid(r))return r;for(var i=r.pos,a=null,c=r.depth;;c--){var l=r.node(c);if(s>0?r.indexAfter(c)<l.childCount:r.index(c)>0){a=l.child(s>0?r.indexAfter(c):r.index(c)-1);break}if(0==c)return null;var u=r.doc.resolve(i+=s);if(t.valid(u))return u}for(;;){var d=s>0?a.firstChild:a.lastChild;if(!d){if(a.isAtom&&!a.isText&&!b.qv.isSelectable(a)){r=r.doc.resolve(i+a.nodeSize*s),o=!1;continue t}break}a=d;var p=r.doc.resolve(i+=s);if(t.valid(p))return p}return null}},t}(b.Y1);O.prototype.visible=!1,b.Y1.jsonID("gapcursor",O);var st=function(t){this.pos=t};st.prototype.map=function(t){return new st(t.map(this.pos))},st.prototype.resolve=function(t){var n=t.resolve(this.pos);return O.valid(n)?new O(n):b.Y1.near(n)};var rr=(0,re.$)({ArrowLeft:ot("horiz",-1),ArrowRight:ot("horiz",1),ArrowUp:ot("vert",-1),ArrowDown:ot("vert",1)});function ot(e,t){var n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(r,s,o){var i=r.selection,a=t>0?i.$to:i.$from,c=i.empty;if(i instanceof b.Bs){if(!o.endOfTextblock(n)||0==a.depth)return!1;c=!1,a=r.doc.resolve(t>0?a.after():a.before())}var l=O.findFrom(a,t,c);return!!l&&(s&&s(r.tr.setSelection(new O(l))),!0)}}function sr(e,t,n){if(!e.editable)return!1;var r=e.state.doc.resolve(t);if(!O.valid(r))return!1;var o=e.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(o>-1&&b.qv.isSelectable(e.state.doc.nodeAt(o))||(e.dispatch(e.state.tr.setSelection(new O(r))),0))}function or(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof O))return!1;var r=e.state.selection.$from,s=r.parent.contentMatchAt(r.index()).findWrapping(e.state.schema.nodes.text);if(!s)return!1;for(var o=I.HY.empty,i=s.length-1;i>=0;i--)o=I.HY.from(s[i].createAndFill(null,o));var a=e.state.tr.replace(r.pos,r.pos,new I.p2(o,0,0));return a.setSelection(b.Bs.near(a.doc.resolve(r.pos+1))),e.dispatch(a),!1}function ir(e){if(!(e.selection instanceof O))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",Et.EH.create(e.doc,[Et.p.widget(e.selection.head,t,{key:"gapcursor"})])}const ar=C.create({name:"gapCursor",addProseMirrorPlugins:()=>[new b.Sy({props:{decorations:ir,createSelectionBetween:function(t,n,r){if(n.pos==r.pos&&O.valid(r))return new O(r)},handleClick:sr,handleKeyDown:rr,handleDOMEvents:{beforeinput:or}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!==(t=M(v(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),cr=E.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",T(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,c=o||s.$to.parentOffset&&s.$from.marks();return t().insertContent({type:this.name}).command(({tr:l,dispatch:u})=>{if(u&&c&&i){const d=c.filter(p=>a.includes(p.type.name));l.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),lr=E.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,T(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>kt({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var _=function(){};_.prototype.append=function(t){return t.length?(t=_.from(t),!this.length&&t||t.length<200&&this.leafAppend(t)||this.length<200&&t.leafPrepend(this)||this.appendInner(t)):this},_.prototype.prepend=function(t){return t.length?_.from(t).append(this):this},_.prototype.appendInner=function(t){return new ur(this,t)},_.prototype.slice=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=this.length),t>=n?_.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))},_.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},_.prototype.forEach=function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)},_.prototype.map=function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=this.length);var s=[];return this.forEach(function(o,i){return s.push(t(o,i))},n,r),s},_.from=function(t){return t instanceof _?t:t&&t.length?new Ut(t):_.empty};var Ut=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,o){return 0==s&&o==this.length?this:new t(this.values.slice(s,o))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,o,i,a){for(var c=o;c<i;c++)if(!1===s(this.values[c],a+c))return!1},t.prototype.forEachInvertedInner=function(s,o,i,a){for(var c=o-1;c>=i;c--)if(!1===s(this.values[c],a+c))return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=200)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=200)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(_);_.empty=new Ut([]);var ur=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,o,i){var a=this.left.length;if(s<a&&!1===this.left.forEachInner(r,s,Math.min(o,a),i)||o>a&&!1===this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,o)-a,i+a))return!1},t.prototype.forEachInvertedInner=function(r,s,o,i){var a=this.left.length;if(s>a&&!1===this.right.forEachInvertedInner(r,s-a,Math.max(o,a)-a,i+a)||o<a&&!1===this.left.forEachInvertedInner(r,Math.min(s,a),o,i))return!1},t.prototype.sliceInner=function(r,s){if(0==r&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(_);const qt=_;var S=function(t,n){this.items=t,this.eventCount=n};S.prototype.popEvent=function(t,n){var i,a,r=this;if(0==this.eventCount)return null;for(var s=this.items.length;;s--)if(this.items.get(s-1).selection){--s;break}n&&(i=this.remapping(s,this.items.length),a=i.maps.length);var l,u,c=t.tr,d=[],p=[];return this.items.forEach(function(f,m){if(!f.step)return i||(i=r.remapping(s,m+1),a=i.maps.length),a--,void p.push(f);if(i){p.push(new B(f.map));var g,h=f.step.map(i.slice(a));h&&c.maybeStep(h).doc&&d.push(new B(g=c.mapping.maps[c.mapping.maps.length-1],null,null,d.length+p.length)),a--,g&&i.appendMap(g,a)}else c.maybeStep(f.step);return f.selection?(l=i?f.selection.map(i.slice(a)):f.selection,u=new S(r.items.slice(0,s).append(p.reverse().concat(d)),r.eventCount-1),!1):void 0},this.items.length,0),{remaining:u,transform:c,selection:l}},S.prototype.addTransform=function(t,n,r,s){for(var o=[],i=this.eventCount,a=this.items,c=!s&&a.length?a.get(a.length-1):null,l=0;l<t.steps.length;l++){var p,u=t.steps[l].invert(t.docs[l]),d=new B(t.mapping.maps[l],u,n);(p=c&&c.merge(d))&&(d=p,l?o.pop():a=a.slice(0,a.length-1)),o.push(d),n&&(i++,n=null),s||(c=d)}var f=i-r.depth;return f>hr&&(a=function fr(e,t){var n;return e.forEach(function(r,s){if(r.selection&&0==t--)return n=s,!1}),e.slice(n)}(a,f),i-=f),new S(a.append(o),i)},S.prototype.remapping=function(t,n){var r=new A.vs;return this.items.forEach(function(s,o){r.appendMap(s.map,null!=s.mirrorOffset&&o-s.mirrorOffset>=t?r.maps.length-s.mirrorOffset:null)},t,n),r},S.prototype.addMaps=function(t){return 0==this.eventCount?this:new S(this.items.append(t.map(function(n){return new B(n)})),this.eventCount)},S.prototype.rebased=function(t,n){if(!this.eventCount)return this;var r=[],s=Math.max(0,this.items.length-n),o=t.mapping,i=t.steps.length,a=this.eventCount;this.items.forEach(function(f){f.selection&&a--},s);var c=n;this.items.forEach(function(f){var m=o.getMirror(--c);if(null!=m){i=Math.min(i,m);var h=o.maps[m];if(f.step){var g=t.steps[m].invert(t.docs[m]),y=f.selection&&f.selection.map(o.slice(c+1,m));y&&a++,r.push(new B(h,g,y))}else r.push(new B(h))}},s);for(var l=[],u=n;u<i;u++)l.push(new B(o.maps[u]));var d=this.items.slice(0,s).append(l).append(r),p=new S(d,a);return p.emptyItemCount()>500&&(p=p.compress(this.items.length-r.length)),p},S.prototype.emptyItemCount=function(){var t=0;return this.items.forEach(function(n){n.step||t++}),t},S.prototype.compress=function(t){void 0===t&&(t=this.items.length);var n=this.remapping(0,t),r=n.maps.length,s=[],o=0;return this.items.forEach(function(i,a){if(a>=t)s.push(i),i.selection&&o++;else if(i.step){var c=i.step.map(n.slice(r)),l=c&&c.getMap();if(r--,l&&n.appendMap(l,r),c){var u=i.selection&&i.selection.map(n.slice(r));u&&o++;var p,d=new B(l.invert(),c,u),f=s.length-1;(p=s.length&&s[f].merge(d))?s[f]=p:s.push(d)}}else i.map&&r--},this.items.length,0),new S(qt.from(s.reverse()),o)},S.empty=new S(qt.empty,0);var B=function(t,n,r,s){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=s};B.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var n=t.step.merge(this.step);if(n)return new B(n.getMap().invert(),n,this.selection)}};var j=function(t,n,r,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=s},hr=20;function Xt(e){var t=[];return e.forEach(function(n,r,s,o){return t.push(s,o)}),t}function St(e,t){if(!e)return null;for(var n=[],r=0;r<e.length;r+=2){var s=t.map(e[r],1),o=t.map(e[r+1],-1);s<=o&&n.push(s,o)}return n}function Qt(e,t,n,r){var s=at(t),o=L.get(t).spec.config,i=(r?e.undone:e.done).popEvent(t,s);if(i){var a=i.selection.resolve(i.transform.doc),c=(r?e.done:e.undone).addTransform(i.transform,t.selection.getBookmark(),o,s),l=new j(r?c:i.remaining,r?i.remaining:c,null,0);n(i.transform.setSelection(a).setMeta(L,{redo:r,historyState:l}).scrollIntoView())}}var xt=!1,Zt=null;function at(e){var t=e.plugins;if(Zt!=t){xt=!1,Zt=t;for(var n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){xt=!0;break}}return xt}var L=new b.H$("history"),te=new b.H$("closeHistory");function ee(e,t){var n=L.getState(e);return!(!n||0==n.done.eventCount||(t&&Qt(n,e,t,!1),0))}function ne(e,t){var n=L.getState(e);return!(!n||0==n.undone.eventCount||(t&&Qt(n,e,t,!0),0))}const yr=C.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>ee(e,t),redo:()=>({state:e,dispatch:t})=>ne(e,t)}),addProseMirrorPlugins(){return[(e=this.options,new b.Sy({key:L,state:{init:function(){return new j(S.empty,S.empty,null,0)},apply:function(n,r,s){return function mr(e,t,n,r){var o,s=n.getMeta(L);if(s)return s.historyState;n.getMeta(te)&&(e=new j(e.done,e.undone,null,0));var i=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(i&&i.getMeta(L))return i.getMeta(L).redo?new j(e.done.addTransform(n,null,r,at(t)),e.undone,Xt(n.mapping.maps[n.steps.length-1]),e.prevTime):new j(e.done,e.undone.addTransform(n,null,r,at(t)),null,e.prevTime);if(!1===n.getMeta("addToHistory")||i&&!1===i.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new j(e.done.rebased(n,o),e.undone.rebased(n,o),St(e.prevRanges,n.mapping),e.prevTime):new j(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),St(e.prevRanges,n.mapping),e.prevTime);var a=0==e.prevTime||!i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function gr(e,t){if(!t)return!1;if(!e.docChanged)return!0;var n=!1;return e.mapping.maps[0].forEach(function(r,s){for(var o=0;o<t.length;o+=2)r<=t[o+1]&&s>=t[o]&&(n=!0)}),n}(n,e.prevRanges)),c=i?St(e.prevRanges,n.mapping):Xt(n.mapping.maps[n.steps.length-1]);return new j(e.done.addTransform(n,a?t.selection.getBookmark():null,r,at(t)),S.empty,c,n.time)}(r,s,n,e)}},config:e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},props:{handleDOMEvents:{beforeinput:function(n,r){var s="historyUndo"==r.inputType?ee(n.state,n.dispatch):"historyRedo"==r.inputType&&ne(n.state,n.dispatch);return s&&r.preventDefault(),s}}}}))];var e},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),br=E.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",T(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e})=>e().insertContent({type:this.name}).command(({tr:t,dispatch:n})=>{var r;if(n){const{$to:s}=t.selection,o=s.end();if(s.nodeAfter)t.setSelection(b.Bs.create(t.doc,s.pos));else{const i=null===(r=s.parent.type.contentMatch.defaultType)||void 0===r?void 0:r.create();i&&(t.insert(o,i),t.setSelection(b.Bs.create(t.doc,o)))}t.scrollIntoView()}return!0}).run()}},addInputRules(){return[(e={find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type},new J({find:e.find,handler:({state:t,range:n,match:r})=>{const s=M(e.getAttributes,void 0,r)||{},{tr:o}=t,i=n.from;let a=n.to;if(r[1]){let l=i+r[0].lastIndexOf(r[1]);l>a?l=a:a=l+r[1].length,o.insertText(r[0][r[0].length-1],i+r[0].length-1),o.replaceWith(l,a,e.type.create(s))}else r[0]&&o.replaceWith(i,a,e.type.create(s))}}))];var e}}),Mr=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))$/,kr=/(?:^|\s)((?:\*)((?:[^*]+))(?:\*))/g,wr=/(?:^|\s)((?:_)((?:[^_]+))(?:_))$/,_r=/(?:^|\s)((?:_)((?:[^_]+))(?:_))/g,Sr=D.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML({HTMLAttributes:e}){return["em",T(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[V({find:Mr,type:this.type}),V({find:wr,type:this.type})]},addPasteRules(){return[K({find:kr,type:this.type}),K({find:_r,type:this.type})]}}),xr=E.create({name:"listItem",addOptions:()=>({HTMLAttributes:{}}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",T(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Tr=/^(\d+)\.\s$/,Er=E.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return 1===t?["ol",T(this.options.HTMLAttributes,n),0]:["ol",T(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){return[wt({find:Tr,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]})]}}),Ar=E.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",T(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Cr=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))$/,Or=/(?:^|\s)((?:~~)((?:[^~]+))(?:~~))/g,Ir=D.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",T(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-x":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[V({find:Cr,type:this.type})]},addPasteRules(){return[K({find:Or,type:this.type})]}}),Pr=E.create({name:"text",group:"inline"}),Br=C.create({name:"starterKit",addExtensions(){var e,t,n,r,s,o,i,a,c,l,u,d,p,f,m,h,g,y;const k=[];return!1!==this.options.blockquote&&k.push($n.configure(null===(e=this.options)||void 0===e?void 0:e.blockquote)),!1!==this.options.bold&&k.push(Fn.configure(null===(t=this.options)||void 0===t?void 0:t.bold)),!1!==this.options.bulletList&&k.push(Kn.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&k.push(Jn.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&k.push(qn.configure(null===(s=this.options)||void 0===s?void 0:s.codeBlock)),!1!==this.options.document&&k.push(Xn.configure(null===(o=this.options)||void 0===o?void 0:o.document)),!1!==this.options.dropcursor&&k.push(Zn.configure(null===(i=this.options)||void 0===i?void 0:i.dropcursor)),!1!==this.options.gapcursor&&k.push(ar.configure(null===(a=this.options)||void 0===a?void 0:a.gapcursor)),!1!==this.options.hardBreak&&k.push(cr.configure(null===(c=this.options)||void 0===c?void 0:c.hardBreak)),!1!==this.options.heading&&k.push(lr.configure(null===(l=this.options)||void 0===l?void 0:l.heading)),!1!==this.options.history&&k.push(yr.configure(null===(u=this.options)||void 0===u?void 0:u.history)),!1!==this.options.horizontalRule&&k.push(br.configure(null===(d=this.options)||void 0===d?void 0:d.horizontalRule)),!1!==this.options.italic&&k.push(Sr.configure(null===(p=this.options)||void 0===p?void 0:p.italic)),!1!==this.options.listItem&&k.push(xr.configure(null===(f=this.options)||void 0===f?void 0:f.listItem)),!1!==this.options.orderedList&&k.push(Er.configure(null===(m=this.options)||void 0===m?void 0:m.orderedList)),!1!==this.options.paragraph&&k.push(Ar.configure(null===(h=this.options)||void 0===h?void 0:h.paragraph)),!1!==this.options.strike&&k.push(Ir.configure(null===(g=this.options)||void 0===g?void 0:g.strike)),!1!==this.options.text&&k.push(Pr.configure(null===(y=this.options)||void 0===y?void 0:y.text)),k}})}}]);