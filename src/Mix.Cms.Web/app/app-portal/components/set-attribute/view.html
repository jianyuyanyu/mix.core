<h6 class="card-header">
    <span ng-bind="$ctrl.title"></span>
    <a ng-click="$ctrl.addAttr()" class="btn btn-primary btn-sm float-right text-white">Add New</a>
    <!-- <a ng-click="$ctrl.generateForm()" class="btn btn-primary btn-sm float-right text-white mr-2">Generate Form</a> -->
</h6>
<table class="table table-sm" id="Table">
    <thead class="thead-light">
        <tr>
            <th scope="col" width="5%">
                <span class="fas fa-sort-numeric-down"></span>
            </th>
            <th scope="col">Attribute Name</th>
            <!--<th scope="col">Name</th>-->
            <th scope="col" width="20%">Data Type</th>
            <!--<th scope="col" width="5%">Width</th>-->
            <th scope="col" width="5%">Unique</th>
            <th scope="col" width="5%">Required</th>
            <!--<th scope="col" width="5%">GroupBy</th>-->
            <th scope="col" width="5%">Select</th>
            <th scope="col" width="5%">Display</th>
            <th scope="col" width="5%"></th>
        </tr>
    </thead>
    <tbody class="sortable" dnd-list="$ctrl.columns">
        <tr class="sortable-item module-column" ng-repeat="col in $ctrl.columns" dnd-draggable="col" dnd-effect-allowed="move" dnd-selected="selectedCol = col" 
            dnd-moved="$ctrl.columns.splice($index, 1)" ng-class="{'selected': $ctrl.selectedCol === col}">
            <td style="cursor:move;" class="drag-header">
                <span class="fas fa-sort"></span>
            </td>
            <td>
                <input ng-model="col.title" placeholder="Title" ng-change="$ctrl.generateName(col)" class="form-control form-control-sm">
                <small class="form-text text-muted">Name: <span ng-bind="col.name"></span></small>                
            </td>
            <td>
                <select class="form-control form-control-sm" ng-model="col.dataType">
                    <option ng-repeat="item in $ctrl.settings.dataTypes track by $index" ng-value="$index">{{item}}</option>
                </select>
            </td>
            <!--<td>
                <input ng-model="col.width" class="form-control form-control-sm" />
            </td>-->
            <td>
                <span class="switch">
                    <input id="isUnique_{{$index}}" type="checkbox" class="switch" ng-model="col.isUnique">
                    <label for="isUnique_{{$index}}">&nbsp;</label>
                </span>
            </td>
            <td>
                <span class="switch">
                    <input id="isRequired_{{$index}}" type="checkbox" class="checkbox" ng-model="col.isRequired">
                    <label for="isRequired_{{$index}}">&nbsp;</label>
                </span>
            </td>
            <!--<td>
                <span class="switch">
                    <input id="isGroupBy_{{$index}}" type="checkbox" class="switch" ng-model="col.isGroupBy">
                    <label for="isGroupBy_{{$index}}">&nbsp;</label>
                </span>
            </td>-->
            <td>
                <span class="switch">
                    <input id="isSelect_{{$index}}" type="checkbox" class="switch" ng-model="col.isSelect">
                    <label for="isSelect_{{$index}}">&nbsp;</label>
                </span>
            </td>
            <td>
                <span class="switch">
                    <input id="isDisplay_{{$index}}" type="checkbox" class="switch" ng-model="col.isDisplay">
                    <label for="isDisplay_{{$index}}">&nbsp;</label>
                </span>
            </td>
            <td>
                <a class="btn btn-sm btn-light del-popover" ng-click="$ctrl.removeAttr($index);">
                    <span class="fas fa-times text-danger"></span>
                </a>
            </td>
        </tr>
        <tr class="module-column" ng-repeat="col in $ctrl.columns track by $index" ng-if="col.isSelect">
            <td colspan="8">
                <div class="col-12">
                    <!-- <div class="col-12">
                        <h1 ng-bind="col.name"></h1>
                        <input type="text" id="option_{{$index}}" ng-enter="addOption(col,$index)" placeholder="fill then enter to add options" class="form-control">
                    </div> -->
                    <div class="form-group row mb-0">
                        <label for="staticEmail" class="col-sm-2 col-form-label" ng-bind="col.title"></label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control form-control-sm" id="option_{{$index}}" ng-enter="addOption(col,$index)" placeholder="fill then enter to add options">
                        </div>
                    </div>
                    <div class="row pb-1" ng-repeat="opt in col.options track by $index">
                        <div class="col-8">
                            <input type="text" class="form-control form-control-sm" ng-model="col.options[$index]">
                        </div>
                        <div class="col-4">
                            <a class="btn" ng-click="col.options.splice($index,1)">
                                <span class="fas fa-times text-danger"></span>
                            </a>
                        </div>
                    </div>
                </div>

            </td>
        </tr>
    </tbody>
</table>